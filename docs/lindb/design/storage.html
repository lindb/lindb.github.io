<!DOCTYPE html><html lang="en" class="dark [--scroll-mt:9.875rem] [scrollbar-gutter:stable] lg:[--scroll-mt:6.3125rem]"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Storage - Lin</title><meta name="next-head-count" content="3"/><link rel="icon" href="/img/logo.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@8/themes/satellite-min.css"/><script>
                try {
                  if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    document.documentElement.classList.add('dark')
                    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0B1120')
                  } else {
                    document.documentElement.classList.remove('dark')
                  }
                } catch (_) {}
              </script><link rel="preload" href="/_next/static/css/ce4bca7d4b222059.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ce4bca7d4b222059.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-fe2d641fe691b132.js" defer=""></script><script src="/_next/static/chunks/framework-dab82874eb842bd1.js" defer=""></script><script src="/_next/static/chunks/main-1448cbf9d2b223a1.js" defer=""></script><script src="/_next/static/chunks/pages/_app-13f13594fc30dab1.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-d4746155604a7421.js" defer=""></script><script src="/_next/static/-NtRW_Tocke_77ve0GfWf/_buildManifest.js" defer=""></script><script src="/_next/static/-NtRW_Tocke_77ve0GfWf/_ssgManifest.js" defer=""></script></head><body class="flex min-h-screen flex-col bg-white text-slate-500 antialiased dark:bg-slate-900 dark:text-slate-400"><div id="__next"><div class="pointer-events-none absolute inset-x-0 top-0 flex justify-center overflow-hidden"><div class="flex w-[108rem] flex-none justify-end"><picture><source srcSet="/_next/static/media/docs@30.8b9a76a2.avif" type="image/avif"/><img src="/_next/static/media/docs@tinypng.d9e4dcdc.png" alt="" class="w-[71.75rem] max-w-none flex-none dark:hidden" decoding="async"/></picture><picture><source srcSet="/_next/static/media/docs-dark@30.1a9f8cbf.avif" type="image/avif"/><img src="/_next/static/media/docs-dark@tinypng.1bbe175e.png" alt="" class="hidden w-[90rem] max-w-none flex-none dark:block" decoding="async"/></picture></div></div><div class="flex min-h-screen flex-col"><header class="sticky top-0 z-40 w-full flex-none bg-white leading-8 lg:z-50 lg:border-b lg:border-slate-900/10 lg:bg-white/75 lg:backdrop-blur-sm dark:border-slate-50/[0.06] dark:bg-slate-900 lg:dark:bg-transparent"><div class="mx-auto max-w-8xl"><div class="mx-4 border-b border-slate-900/10 py-3 lg:mx-0 lg:border-0 lg:px-8 lg:py-4 dark:border-slate-300/10"><div class="relative flex items-center"><div class="relative ml-auto flex flex-1 items-center"><nav class="flex flex-1 items-center text-sm font-semibold leading-6 text-slate-700 dark:text-slate-200"><a target="_self" href="/"><img src="/img/logo.svg" alt="Lin Labs Logo" class="size-7"/></a><div class="hidden lg:ml-16 lg:block"><ul class="flex space-x-6"><div data-headlessui-state=""><button class="font-semibold  focus:outline-none data-[hover]:text-sky-500 dark:data-[hover]:text-sky-400" type="button" aria-expanded="false" data-headlessui-state="">Open source</button></div><div hidden="" style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div><li class="hover:cursor-pointer"><a target="_self" class="hover:text-sky-500 dark:hover:text-sky-400" href="/docs/lindb/introduction">Docs</a></li><li class="hover:cursor-pointer"><a target="_self" class="hover:text-sky-500 dark:hover:text-sky-400" href="/downloads/lindb">Downloads</a></li></ul></div></nav><div class="flex items-center gap-4"><button class="flex items-center" id="headlessui-menu-button-:R1pj6:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="size-5"><path fill-rule="evenodd" d="M9 2.25a.75.75 0 0 1 .75.75v1.506a49.384 49.384 0 0 1 5.343.371.75.75 0 1 1-.186 1.489c-.66-.083-1.323-.151-1.99-.206a18.67 18.67 0 0 1-2.97 6.323c.318.384.65.753 1 1.107a.75.75 0 0 1-1.07 1.052A18.902 18.902 0 0 1 9 13.687a18.823 18.823 0 0 1-5.656 4.482.75.75 0 0 1-.688-1.333 17.323 17.323 0 0 0 5.396-4.353A18.72 18.72 0 0 1 5.89 8.598a.75.75 0 0 1 1.388-.568A17.21 17.21 0 0 0 9 11.224a17.168 17.168 0 0 0 2.391-5.165 48.04 48.04 0 0 0-8.298.307.75.75 0 0 1-.186-1.489 49.159 49.159 0 0 1 5.343-.371V3A.75.75 0 0 1 9 2.25ZM15.75 9a.75.75 0 0 1 .68.433l5.25 11.25a.75.75 0 1 1-1.36.634l-1.198-2.567h-6.744l-1.198 2.567a.75.75 0 0 1-1.36-.634l5.25-11.25A.75.75 0 0 1 15.75 9Zm-2.672 8.25h5.344l-2.672-5.726-2.672 5.726Z" clip-rule="evenodd"></path></svg></button><button class="flex items-center" id="headlessui-menu-button-:R1qj6:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="size-5 fill-sky-400/20 stroke-sky-500 dark:hidden "><path d="M12 2.25a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM7.5 12a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM18.894 6.166a.75.75 0 0 0-1.06-1.06l-1.591 1.59a.75.75 0 1 0 1.06 1.061l1.591-1.59ZM21.75 12a.75.75 0 0 1-.75.75h-2.25a.75.75 0 0 1 0-1.5H21a.75.75 0 0 1 .75.75ZM17.834 18.894a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 1 0-1.061 1.06l1.59 1.591ZM12 18a.75.75 0 0 1 .75.75V21a.75.75 0 0 1-1.5 0v-2.25A.75.75 0 0 1 12 18ZM7.758 17.303a.75.75 0 0 0-1.061-1.06l-1.591 1.59a.75.75 0 0 0 1.06 1.061l1.591-1.59ZM6 12a.75.75 0 0 1-.75.75H3a.75.75 0 0 1 0-1.5h2.25A.75.75 0 0 1 6 12ZM6.697 7.757a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 0 0-1.061 1.06l1.59 1.591Z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="hidden size-5 fill-sky-400/20 stroke-sky-500 dark:inline"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg></button><a target="_blank" class="block text-slate-600 hover:text-slate-700 dark:text-gray-200 dark:hover:text-slate-300" href="https://github.com/lindb/lindb"><span class="sr-only">LinDB on GitHub</span><svg viewBox="0 0 16 16" class="size-5" fill="currentColor" aria-hidden="true"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a><div class="w-32 lg:w-48"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="-my-1 lg:hidden"><button type="button" class="flex size-5 items-center justify-center text-slate-500 hover:text-slate-600 dark:text-slate-400 dark:hover:text-slate-300"><span class="sr-only">Navigation</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="size-5"><path fill-rule="evenodd" d="M10.5 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z" clip-rule="evenodd"></path></svg></button></div></div></div></div></div></div></header><div class="sticky top-[3.3rem] z-50 flex items-center border-b border-slate-900/10 bg-white p-4 leading-6 lg:hidden lg:bg-white/75 lg:backdrop-blur-sm dark:border-slate-50/[0.06] dark:bg-slate-900 lg:dark:bg-transparent"><button type="button" class="text-slate-500 hover:text-slate-600 dark:text-slate-400 dark:hover:text-slate-300"><span class="sr-only">Navigation</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="size-6"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg></button><ol class="ml-4 flex min-w-0 whitespace-nowrap text-sm leading-6"><li class="flex items-center">Design<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="size-5"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></li><li class="truncate font-semibold text-slate-900 dark:text-slate-200">Storage</li></ol></div><main class="flex flex-1 pt-4"><div class="mx-auto flex max-w-8xl flex-1 flex-col px-4 sm:px-6 md:px-8"><div><div class="z-20 w-52 overflow-y-auto pb-10 lg:block xl:w-[19rem] hidden pl-8 fixed inset-0 left-[max(0px,calc(50%-45rem))] right-auto top-[3.8125rem]"><nav class="relative pt-5 lg:text-sm lg:leading-6"><ul><li><a target="_self" class="group mb-4 flex items-center font-semibold lg:text-sm lg:leading-6 text-slate-900 dark:text-slate-200 hover:text-slate-900  dark:hover:text-slate-300" href="/docs/lindb/introduction"><div class="mr-4 rounded-md p-1 shadow-sm ring-1 ring-slate-900/5 group-hover:shadow group-hover:shadow-violet-200 group-hover:ring-slate-900/10 dark:bg-slate-800 dark:shadow-none dark:ring-0 dark:group-hover:shadow-slate-400"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="size-4 fill-cyan-500 group-hover:fill-cyan-600"><path d="M11.25 4.533A9.707 9.707 0 0 0 6 3a9.735 9.735 0 0 0-3.25.555.75.75 0 0 0-.5.707v14.25a.75.75 0 0 0 1 .707A8.237 8.237 0 0 1 6 18.75c1.995 0 3.823.707 5.25 1.886V4.533ZM12.75 20.636A8.214 8.214 0 0 1 18 18.75c.966 0 1.89.166 2.75.47a.75.75 0 0 0 1-.708V4.262a.75.75 0 0 0-.5-.707A9.735 9.735 0 0 0 18 3a9.707 9.707 0 0 0-5.25 1.533v16.103Z"></path></svg></div>Introduction</a></li><li><a target="_self" class="group mb-4 flex items-center font-semibold lg:text-sm lg:leading-6 text-slate-900 dark:text-slate-200 hover:text-slate-900  dark:hover:text-slate-300" href="/docs/lindb/release-notes"><div class="mr-4 rounded-md p-1 shadow-sm ring-1 ring-slate-900/5 group-hover:shadow group-hover:shadow-violet-200 group-hover:ring-slate-900/10 dark:bg-slate-800 dark:shadow-none dark:ring-0 dark:group-hover:shadow-slate-400"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="size-4 fill-violet-400 group-hover:fill-violet-500"><path fill-rule="evenodd" d="M9.315 7.584C12.195 3.883 16.695 1.5 21.75 1.5a.75.75 0 0 1 .75.75c0 5.056-2.383 9.555-6.084 12.436A6.75 6.75 0 0 1 9.75 22.5a.75.75 0 0 1-.75-.75v-4.131A15.838 15.838 0 0 1 6.382 15H2.25a.75.75 0 0 1-.75-.75 6.75 6.75 0 0 1 7.815-6.666ZM15 6.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" clip-rule="evenodd"></path><path d="M5.26 17.242a.75.75 0 1 0-.897-1.203 5.243 5.243 0 0 0-2.05 5.022.75.75 0 0 0 .625.627 5.243 5.243 0 0 0 5.022-2.051.75.75 0 1 0-1.202-.897 3.744 3.744 0 0 1-3.008 1.51c0-1.23.592-2.323 1.51-3.008Z"></path></svg></div>Releases</a></li><li class="mt-4"><h5 class="mb-2 font-semibold text-slate-900 lg:mb-3 dark:text-slate-200">Getting Started</h5><ul class="space-y-2 border-l border-slate-100 lg:space-y-2 dark:border-slate-800"><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/getting-started/docker">Docker</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/getting-started/package">Package</a></li></ul></li><li class="mt-4"><h5 class="mb-2 font-semibold text-slate-900 lg:mb-3 dark:text-slate-200">Developer Guide</h5><ul class="space-y-2 border-l border-slate-100 lg:space-y-2 dark:border-slate-800"><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/developer-guide/connect">Connect</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/developer-guide/create-database">Create a database</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/developer-guide/insert-data">Insert data</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/developer-guide/query-data">Query data</a></li></ul></li><li class="mt-4"><h5 class="mb-2 font-semibold text-slate-900 lg:mb-3 dark:text-slate-200">Deployment</h5><ul class="space-y-2 border-l border-slate-100 lg:space-y-2 dark:border-slate-800"><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/deployment/kubernetes">Kubernetes</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/deployment/manual">Manual deployment</a></li></ul></li><li class="mt-4"><h5 class="mb-2 font-semibold text-slate-900 lg:mb-3 dark:text-slate-200">Client</h5><ul class="space-y-2 border-l border-slate-100 lg:space-y-2 dark:border-slate-800"><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/client/cli">CLI</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/client/client-libraries">Client libraries</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/client/go">Go</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/client/java">Java</a></li></ul></li><li class="mt-4"><h5 class="mb-2 font-semibold text-slate-900 lg:mb-3 dark:text-slate-200">Lin QL</h5><ul class="space-y-2 border-l border-slate-100 lg:space-y-2 dark:border-slate-800"><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/lin-ql/sql">Lin query language</a></li></ul></li><li class="mt-4"><h5 class="mb-2 font-semibold text-slate-900 lg:mb-3 dark:text-slate-200">Admin Console</h5><ul class="space-y-2 border-l border-slate-100 lg:space-y-2 dark:border-slate-800"><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/admin-console/index">Introduction</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/admin-console/overview">Cluster overview</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/admin-console/search">Data search</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/admin-console/explore">Data explore</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/admin-console/monitoring">Cluster monitoring</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/admin-console/metadata">Metadata</a></li></ul></li><li class="mt-4"><h5 class="mb-2 font-semibold text-slate-900 lg:mb-3 dark:text-slate-200">API</h5><ul class="space-y-2 border-l border-slate-100 lg:space-y-2 dark:border-slate-800"><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/api/index">Introduction</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/api/insert">Insert</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/api/query">Query</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/api/state">State</a></li></ul></li><li class="mt-4"><h5 class="mb-2 font-semibold text-slate-900 lg:mb-3 dark:text-slate-200">Reference</h5><ul class="space-y-2 border-l border-slate-100 lg:space-y-2 dark:border-slate-800"><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/reference/data-model">Data Model</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/reference/metric">Metric</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/reference/configuration">Configuration</a></li></ul></li><li class="mt-4"><h5 class="mb-2 font-semibold text-slate-900 lg:mb-3 dark:text-slate-200">Design</h5><ul class="space-y-2 border-l border-slate-100 lg:space-y-2 dark:border-slate-800"><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/design/architecture">Architecture</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/design/coordinator">Coordinator</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/design/replication">Replication</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/design/query">Query</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 text-sky-500 border-current font-semibold dark:text-sky-400" href="/docs/lindb/design/storage">Storage</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/design/memory-database">Memory database</a></li><li class=""><a target="_self" class="-ml-px block border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/design/inverted-index">Inverted index</a></li></ul></li></ul></nav></div></div><div class="flex-1 lg:pl-36 xl:pl-[19.5rem]"><div class="mx-auto max-w-3xl xl:ml-0 xl:mr-[15.5rem] xl:max-w-none xl:pr-16"><header id="header" class="relative border-b border-gray-200 pb-4 dark:border-gray-800 "><div><p class="mb-2 hidden text-sm font-semibold leading-6 text-sky-500 lg:block dark:text-sky-400">Design</p><div class="flex items-center"><h1 class="inline-block text-2xl font-extrabold tracking-tight text-slate-900 sm:text-3xl dark:text-slate-200">Storage</h1></div></div><div class="mt-1 text-sm italic">Last updated on<!-- --> <span class="font-medium text-slate-900 underline decoration-sky-500 dark:text-slate-200">Mon Jun 24 07:03:27 2024</span> <!-- -->by<!-- --> <span class="font-medium text-slate-900 underline decoration-sky-500 dark:text-slate-200">stone1100</span></div></header><div id="content-wrapper" class="prose prose-slate relative mt-8 dark:prose-dark"><p>All data of <strong>LinDB</strong> will be stored on the local disk, and there are different storage structures according to different data types:</p>
<ul>
<li><strong>Metirc Metadata</strong>: store <strong>Metric Name</strong> and its underlying <strong>Fields</strong>/<strong>Tag Keys</strong>;</li>
<li><strong>Tags(Series) Index</strong>: store all <strong>Tags</strong> under a <strong>Metric</strong>, this part is divided into <strong>2</strong> data types;<!-- -->
<ul>
<li>Forward: <strong>Tags</strong> corresponding to <strong>Series ID</strong>;</li>
<li>Inverted: The inverted index of <strong>Tag Key/Value</strong>, where  <strong>Series ID</strong> are binding to <strong>Tag Value</strong>. <strong>Series ID</strong> set is compressed stored by <a target="_blank" href="http://roaringbitmap.org">RoaringBitMap<span class="ml-1 inline-flex"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="size-4 fill-sky-500"><path fill-rule="evenodd" d="M15.75 2.25H21a.75.75 0 0 1 .75.75v5.25a.75.75 0 0 1-1.5 0V4.81L8.03 17.03a.75.75 0 0 1-1.06-1.06L19.19 3.75h-3.44a.75.75 0 0 1 0-1.5Zm-10.5 4.5a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h10.5a1.5 1.5 0 0 0 1.5-1.5V10.5a.75.75 0 0 1 1.5 0v8.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h8.25a.75.75 0 0 1 0 1.5H5.25Z" clip-rule="evenodd"></path></svg></span></a> ;</li>
</ul>
</li>
<li><strong>Data</strong>: Storage of <strong>Data Point</strong> under all <strong>Time Series</strong>;</li>
</ul>
<p>All the above data types are stored in a common underlying <strong>KV Store</strong>.</p>
<h2 id="time-series-characteristics" heading="2" href="#time-series-characteristics"><a class="group relative border-none lg:-ml-2 lg:pl-2" href="/docs/lindb/design/storage#time-series-characteristics"><span class="absolute -ml-8 hidden items-center border-0 opacity-0 group-hover:opacity-100 group-focus:opacity-100 lg:flex">​<span class="flex size-6 items-center justify-center rounded-md text-slate-400 shadow-sm ring-1 ring-slate-900/5 hover:text-slate-700 hover:shadow hover:ring-slate-900/10 dark:bg-slate-800 dark:text-slate-400 dark:shadow-none dark:ring-0 dark:hover:bg-slate-700 dark:hover:text-slate-200"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></span></span>Time series characteristics</a></h2>
<p>Before talking about storage, let&#x27;s talk about the characteristics of time-series, as shown in the figure:</p>
<p><span class="not-prose flex flex-col text-center"><img src="/img/lindb/design/time_series_characteristic.png" alt="Time series characteristics" decoding="async" class="mx-auto"/><span class="mt-2 text-sm font-semibold italic">Time series characteristics</span></span></p>
<p>Time series data characteristics (according to its time characteristics, it can be divided into time-invariant and time-variant data)</p>
<ol>
<li><strong>Time Series</strong> =&gt; <strong>Metric + Tags</strong>: This part of the data is basically a string, and this data occupies the bulk of the data packet, but it will not vary with time flows.
Converting these strings into numerical values for storage to reduce storage costs;</li>
<li><strong>Fields</strong>: This part of the data is basically numeric and changes with time, but the numeric type is easy to compress;</li>
</ol>
<h2 id="storage-structure" heading="2" href="#storage-structure"><a class="group relative border-none lg:-ml-2 lg:pl-2" href="/docs/lindb/design/storage#storage-structure"><span class="absolute -ml-8 hidden items-center border-0 opacity-0 group-hover:opacity-100 group-focus:opacity-100 lg:flex">​<span class="flex size-6 items-center justify-center rounded-md text-slate-400 shadow-sm ring-1 ring-slate-900/5 hover:text-slate-700 hover:shadow hover:ring-slate-900/10 dark:bg-slate-800 dark:text-slate-400 dark:shadow-none dark:ring-0 dark:hover:bg-slate-700 dark:hover:text-slate-200"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></span></span>Storage structure</a></h2>
<h3 id="database" heading="3" href="#database"><a class="group relative border-none lg:-ml-2 lg:pl-2" href="/docs/lindb/design/storage#database"><span class="absolute -ml-8 hidden items-center border-0 opacity-0 group-hover:opacity-100 group-focus:opacity-100 lg:flex">​<span class="flex size-6 items-center justify-center rounded-md text-slate-400 shadow-sm ring-1 ring-slate-900/5 hover:text-slate-700 hover:shadow hover:ring-slate-900/10 dark:bg-slate-800 dark:text-slate-400 dark:shadow-none dark:ring-0 dark:hover:bg-slate-700 dark:hover:text-slate-200"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></span></span>Database</a></h3>
<p><span class="not-prose flex flex-col text-center"><img src="/img/lindb/design/storage_database.png" alt="storage database" decoding="async" class="mx-auto"/><span class="mt-2 text-sm font-semibold italic">storage database</span></span></p>
<ul>
<li>The data of a database are distributed on different nodes of the <strong>Storage</strong> cluster according to <strong>Shard</strong>;</li>
<li>A <strong>Shard</strong> can have multiple replicas, please see <a target="_self" href="/docs/lindb/design/replication">Replication</a> for details;</li>
</ul>
<h3 id="shard" heading="3" href="#shard"><a class="group relative border-none lg:-ml-2 lg:pl-2" href="/docs/lindb/design/storage#shard"><span class="absolute -ml-8 hidden items-center border-0 opacity-0 group-hover:opacity-100 group-focus:opacity-100 lg:flex">​<span class="flex size-6 items-center justify-center rounded-md text-slate-400 shadow-sm ring-1 ring-slate-900/5 hover:text-slate-700 hover:shadow hover:ring-slate-900/10 dark:bg-slate-800 dark:text-slate-400 dark:shadow-none dark:ring-0 dark:hover:bg-slate-700 dark:hover:text-slate-200"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></span></span>Shard</a></h3>
<div class="bg-slate-100/80  ring-1 ring-slate-300 dark:bg-slate-700/80 dark:ring-white/20"><div class="border-b border-slate-300  p-2 text-xs text-slate-900 dark:border-b-white/20 dark:text-sky-300"><div class="flex flex-none items-center gap-1 "><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0 0 21 18V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v12a2.25 2.25 0 0 0 2.25 2.25Z"></path></svg>Terminal</div></div><pre class="mt-0 grid border-0 p-3 shiki shiki-themes material-theme-lighter catppuccin-macchiato language-sh" style="background-color:#FAFAFA;--shiki-dark-bg:#1e293b;color:#90A4AE;--shiki-dark:#cad3f5" tabindex="0"><code class="language-sh"><span class="line"><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> db_test_1</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> meta</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">  |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> namespace</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">  |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> metric</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">  |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> field</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">  |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> tagkey</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">  |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  └─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> tagvalue</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  └─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> shard</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#91B859;--shiki-dark:#A6DA95">     ├─</span><span style="color:#F76D47;--shiki-dark:#F5A97F"> 1</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> inverted</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> forward</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  └─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> segment</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">     ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> day</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#F76D47;--shiki-dark:#F5A97F"> 20190101</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">  |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#F76D47;--shiki-dark:#F5A97F"> 01</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">  |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#F76D47;--shiki-dark:#F5A97F"> 02</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">  |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  └─</span><span style="color:#F76D47;--shiki-dark:#F5A97F"> 23</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  └─</span><span style="color:#F76D47;--shiki-dark:#F5A97F"> 20190102</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">     ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> month</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#F76D47;--shiki-dark:#F5A97F"> 201901</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">  |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#F76D47;--shiki-dark:#F5A97F"> 01</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">  |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#F76D47;--shiki-dark:#F5A97F"> 02</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">  |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  └─</span><span style="color:#F76D47;--shiki-dark:#F5A97F"> 31</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  └─</span><span style="color:#F76D47;--shiki-dark:#F5A97F"> 201902</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">     └─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> year</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">        ├─</span><span style="color:#F76D47;--shiki-dark:#F5A97F"> 2019</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">        |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#F76D47;--shiki-dark:#F5A97F"> 01</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">        |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#F76D47;--shiki-dark:#F5A97F"> 02</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">        |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  └─</span><span style="color:#F76D47;--shiki-dark:#F5A97F"> 12</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">     |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">        └─</span><span style="color:#F76D47;--shiki-dark:#F5A97F"> 2020</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">|</span><span style="color:#91B859;--shiki-dark:#A6DA95">     └─</span><span style="color:#F76D47;--shiki-dark:#F5A97F"> 2</span></span>
<span class="line"><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">└─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> db_test_2</span></span>
<span class="line"></span></code></pre></div>
<p>The storage directory above describes how data are stored on a <strong>Storage</strong> node.</p>
<p>Taking the data structure of a single database on a single node as an example:</p>
<ul>
<li><strong>meta</strong>: store all <strong>metadata</strong>, at database level:<!-- -->
<ul>
<li><strong>namespace</strong></li>
<li><strong>metric</strong></li>
<li><strong>field</strong></li>
<li><strong>tag key</strong></li>
<li><strong>tag value</strong></li>
</ul>
</li>
<li><strong>shard</strong>: A database will have multiple <strong>shard</strong>s on a single node, and each <strong>shard</strong> has the following data:<!-- -->
<ul>
<li><strong>index</strong>: store forward and reverse indexes;</li>
<li><strong>segment</strong>: store the data of each time slice;</li>
</ul>
</li>
</ul>
<p>See <a target="_self" href="/docs/lindb/design/inverted-index">Invertd Index</a> for the structure of <strong>meta</strong> and <strong>index</strong>.</p>
<p>All data are divided into different parts by the <strong>Interval</strong> of the database to store specific data in time slices:</p>
<ul>
<li>The time series has strong time correlation, which makes it easier for querying;</li>
<li>Convenient for handling <strong>TTL</strong>. If the data expires, just delete the corresponding directory directly;</li>
<li>There are multiple <strong>segments</strong> under each <strong>shard</strong>, and each <strong>segment</strong> stores the data of the corresponding time slice according to the corresponding <strong>interval</strong>;</li>
<li>Why are there many <strong>data families</strong> stored according to <strong>interval</strong> under each <strong>segment</strong>? This is mainly because the main problem solved by <strong>LinDB</strong> is to store a large amount of monitoring data. The general monitoring data is basically written at the latest time, and basically no historical data will be written. The data storage of the entire <strong>LinDB</strong> is similar to the <strong>LSM</strong> method, in order to reduce the merge operation between data files which leads to write amplification. then the re-sharding policy of <strong>segment</strong> time slice is adopted.</li>
</ul>
<p>The following is an example of <strong>interval</strong> being <strong>10s</strong>:</p>
<ol>
<li><strong>segment</strong> is stored by day;</li>
<li>Each <strong>segment</strong> is divided into <strong>data family</strong> by hour, one <strong>family</strong> per hour, and the files in each <strong>family</strong> store specific data in columns;</li>
</ol>
<h2 id="kv-store" heading="2" href="#kv-store"><a class="group relative border-none lg:-ml-2 lg:pl-2" href="/docs/lindb/design/storage#kv-store"><span class="absolute -ml-8 hidden items-center border-0 opacity-0 group-hover:opacity-100 group-focus:opacity-100 lg:flex">​<span class="flex size-6 items-center justify-center rounded-md text-slate-400 shadow-sm ring-1 ring-slate-900/5 hover:text-slate-700 hover:shadow hover:ring-slate-900/10 dark:bg-slate-800 dark:text-slate-400 dark:shadow-none dark:ring-0 dark:hover:bg-slate-700 dark:hover:text-slate-200"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></span></span>KV store</a></h2>
<div class="bg-slate-100/80  ring-1 ring-slate-300 dark:bg-slate-700/80 dark:ring-white/20"><div class="border-b border-slate-300  p-2 text-xs text-slate-900 dark:border-b-white/20 dark:text-sky-300"><div class="flex flex-none items-center gap-1 "><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0 0 21 18V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v12a2.25 2.25 0 0 0 2.25 2.25Z"></path></svg>Terminal</div></div><pre class="mt-0 grid border-0 p-3 shiki shiki-themes material-theme-lighter catppuccin-macchiato language-sh" style="background-color:#FAFAFA;--shiki-dark-bg:#1e293b;color:#90A4AE;--shiki-dark:#cad3f5" tabindex="0"><code class="language-sh"><span class="line"><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">└─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> kv_store_1</span></span>
<span class="line"><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">   ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> CURRENT</span></span>
<span class="line"><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">   ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> LOCK</span></span>
<span class="line"><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">   ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> MANIFEST-000010</span></span>
<span class="line"><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">   ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> OPTIONS</span></span>
<span class="line"><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">   ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> family_1</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">   |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> 000001.sst</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">   |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> 000002.sst</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">   |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> 000004.sst</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">   |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  └─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> 000008.sst</span></span>
<span class="line"><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">   ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> family_2</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">   |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> 000011.sst</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">   |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> 000012.sst</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">   |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  ├─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> 000014.sst</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#8BD5CA">   |</span><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">  └─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> 000018.sst</span></span>
<span class="line"><span style="color:#E2931D;--shiki-dark:#8AADF4;font-style:inherit;--shiki-dark-font-style:italic">   └─</span><span style="color:#91B859;--shiki-dark:#A6DA95"> family_3</span></span>
<span class="line"></span></code></pre></div>
<p>The whole <strong>KV Store</strong> is similar to <strong>LSM</strong>, but it is different from <strong>LSM</strong>. The main differences are as follows:</p>
<ul>
<li>There is no <strong>Memory Table</strong>, because the whole system has a <strong>Memory Database</strong> to store all recently data, and these data will be directly written to the <strong>KV Store</strong> later;</li>
<li><strong>Key</strong>&#x27;s type is <strong>uint32</strong>, because all <strong>string</strong> will be converted to <strong>uint32</strong> according to the timing characteristics, so the underlying <strong>KV Store</strong> is directly designed as an <strong>uint32 =&gt; binary</strong> structure;</li>
</ul>
<p>The directory structure is very similar to <strong>rocksdb</strong> and supports <strong>column family</strong>.</p>
<ul>
<li><strong>CURRENT</strong>: record the currently valid <strong>MANIFEST</strong> file;</li>
<li><strong>LOCK</strong>: file lock to prevent multiple processes from opening the same <strong>KV Store</strong>;</li>
<li><strong>MANIFEST</strong>: <strong>change log</strong> of all <strong>sstable</strong> changes, including some <strong>change log</strong> of <strong>sequence</strong>, etc.;</li>
<li><strong>OPTIONS</strong>: <strong>KV Store</strong> configuration information, including configuration information at each <strong>column family</strong> level;</li>
<li><strong>KV Store</strong> can store multiple <strong>column families</strong>, and each <strong>family</strong> stores multiple <strong>sstable</strong> files;</li>
</ul>
<h3 id="compaction" heading="3" href="#compaction"><a class="group relative border-none lg:-ml-2 lg:pl-2" href="/docs/lindb/design/storage#compaction"><span class="absolute -ml-8 hidden items-center border-0 opacity-0 group-hover:opacity-100 group-focus:opacity-100 lg:flex">​<span class="flex size-6 items-center justify-center rounded-md text-slate-400 shadow-sm ring-1 ring-slate-900/5 hover:text-slate-700 hover:shadow hover:ring-slate-900/10 dark:bg-slate-800 dark:text-slate-400 dark:shadow-none dark:ring-0 dark:hover:bg-slate-700 dark:hover:text-slate-200"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></span></span>Compaction</a></h3>
<p><span class="not-prose flex flex-col text-center"><img src="/img/lindb/design/storage_compaction.png" alt="Compaction" decoding="async" class="mx-auto"/><span class="mt-2 text-sm font-semibold italic">Compaction</span></span></p>
<ul>
<li>Each <strong>KV Store</strong> will start a <strong>Goroutine</strong> periodically to <strong>Check</strong> whether there are too many files in each <strong>Family Level 0</strong> and meet the conditions of <strong>Compaction</strong>;</li>
<li>When the conditions are met, the corresponding <strong>Family</strong> will be notified to execute <strong>Compaction Job</strong>, if another <strong>Compaction</strong> job is being executed, this operation will be ignored, all operations will only be done in one <strong>Goroutine</strong>,of which the benefit is lock-free , because <strong>Compaction Job</strong> is a very heavy operation, and if locking is required, it may affect the writing of new files</li>
</ul>
<p><strong>Compaction</strong> mainly merges the files in <strong>Level 0</strong> into <strong>Level 1</strong>. Currently, <strong>LinDB</strong> has only 2 Level, which is different from <strong>LevelDB</strong>.</p>
<p><strong>Compaction</strong> condition: any one of the following conditions will trigger the Compact task:</p>
<ul>
<li>the number of files in <strong>Level 0</strong> exceeds the number of files configured;</li>
</ul>
<p>There are 2 merge process:</p>
<ul>
<li>Directly moving the files of <strong>Level 0</strong> to <strong>Level 1</strong>, but the conditions of <strong>compact</strong> should be met: the number of files of <strong>pick files from level 0</strong> is <strong>1</strong>, the number of files of <strong>pick fiels from level 1</strong> is <strong>1</strong> The number of files is <strong>0</strong>, that is, only one file needs to be merged, just modify <strong>Metadata</strong>;</li>
<li>Need to combine multiple files into one large file;</li>
</ul>
<p>The <strong>Compact</strong> process is as follows:</p>
<ol>
<li>Select the file that needs <strong>Compact</strong>, firstly select the current <strong>level 0</strong> file, then traverse each <strong>level 0</strong> file, press <strong>key range</strong> to get the overlapping file from <strong>level 1</strong>, why is here? Fetch <strong>level 1</strong> files by each <strong>level 0</strong> file, not by the final <strong>key range</strong> in <strong>level 0</strong>. Because the <strong>keys</strong> of the entire <strong>level 0</strong> file may be relatively hashed, so if we take the final <strong>range</strong>, we may get a large range. E.g:</li>
</ol>
<pre class="mt-0 grid p-3 shiki shiki-themes material-theme-lighter catppuccin-macchiato language-yaml" style="background-color:#FAFAFA;--shiki-dark-bg:#1e293b;color:#90A4AE;--shiki-dark:#cad3f5" tabindex="0"><code class="language-yaml"><span class="line"><span style="color:#E53935;--shiki-dark:#8AADF4">for example</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">:</span></span>
<span class="line"><span style="color:#E53935;--shiki-dark:#8AADF4">Level 0</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">:</span></span>
<span class="line"><span style="color:#E53935;--shiki-dark:#8AADF4">    file 1</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">:</span><span style="color:#91B859;--shiki-dark:#A6DA95"> 1~10</span></span>
<span class="line"><span style="color:#E53935;--shiki-dark:#8AADF4">    file 2</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">:</span><span style="color:#91B859;--shiki-dark:#A6DA95"> 1000~1001</span></span>
<span class="line"><span style="color:#90A4AE;--shiki-dark:#CAD3F5">    </span></span>
<span class="line"><span style="color:#E53935;--shiki-dark:#8AADF4">Level 1</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">:</span></span>
<span class="line"><span style="color:#E53935;--shiki-dark:#8AADF4">    file 3</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">:</span><span style="color:#91B859;--shiki-dark:#A6DA95"> 1~5</span></span>
<span class="line"><span style="color:#E53935;--shiki-dark:#8AADF4">    file 4</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">:</span><span style="color:#91B859;--shiki-dark:#A6DA95"> 100~200</span></span>
<span class="line"><span style="color:#E53935;--shiki-dark:#8AADF4">    file 5</span><span style="color:#39ADB5;--shiki-dark:#8BD5CA">:</span><span style="color:#91B859;--shiki-dark:#A6DA95"> 400~500</span></span>
<span class="line"><span style="color:#90A4AE;--shiki-dark:#CAD3F5">    </span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#939AB7">-</span><span style="color:#91B859;--shiki-dark:#A6DA95"> If we press the final range of level 0, 1~1001, this will take out all the files of level 1</span></span>
<span class="line"><span style="color:#39ADB5;--shiki-dark:#939AB7">-</span><span style="color:#91B859;--shiki-dark:#A6DA95"> If we take it according to the range of each level 0, we only need to take the file 3 (1~5) in the end.</span></span>
<span class="line"></span></code></pre>
<ol start="2">
<li>The entire <strong>compact</strong> process is actually a multi-way merge process. Since the <strong>key</strong> is sorted when <strong>flush</strong> writes files, <strong>compact</strong> only needs to read each file in order, and press ** The order of key** can traverse the data from these files;</li>
</ol>
<ul>
<li>During the process, the data with the same <strong>key</strong> needs to be merged. The merging process needs to be merged according to different data types, and the <strong>Merger Interface</strong> needs to be implemented;</li>
<li>If <strong>key</strong> does not need the merge operation, write the corresponding data directly to the file, which can reduce unnecessary serialization operations;</li>
</ul>
<ol start="3">
<li>Once <strong>compact</strong> merging and writing files is successfully completed, submitting <strong>Version Edit</strong> to <strong>Version Set</strong> will be taken. At this time, <strong>Version Edit</strong> includes newly written files and old files that need to be deleted. This process requires locks;</li>
<li>Delete those useless files: such as files that have been merged, or some intermediate result files after failure. It should be noted here that the cleanup operation must be done after the <strong>Version Edit</strong> is successfully submitted to the <strong>Version Set</strong>, otherwise which may leads to data file confusion;</li>
</ol>
<div class="markdown-alert markdown-alert-tip" dir="auto">
<p class="markdown-alert-title" dir="auto"><svg class="octicon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>TIP</p>
<p></p>
<ul>
<li>Version Edit: Similar to LevelDB, a Version Edit will be recorded for each file write operation, and Version Edit will record new files/deleted files, so that when the system restarts or crashes, just reload the Version Edit Log again. There are those that mention the whole useful document;</li>
<li>Version Set: record which files are currently stored and available;</li>
</ul>
</div>
<h3 id="rollup" heading="3" href="#rollup"><a class="group relative border-none lg:-ml-2 lg:pl-2" href="/docs/lindb/design/storage#rollup"><span class="absolute -ml-8 hidden items-center border-0 opacity-0 group-hover:opacity-100 group-focus:opacity-100 lg:flex">​<span class="flex size-6 items-center justify-center rounded-md text-slate-400 shadow-sm ring-1 ring-slate-900/5 hover:text-slate-700 hover:shadow hover:ring-slate-900/10 dark:bg-slate-800 dark:text-slate-400 dark:shadow-none dark:ring-0 dark:hover:bg-slate-700 dark:hover:text-slate-200"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></span></span>Rollup</a></h3>
<p><span class="not-prose flex flex-col text-center"><img src="/img/lindb/design/storage_rollup.png" alt="Rollup" decoding="async" class="mx-auto"/><span class="mt-2 text-sm font-semibold italic">Rollup</span></span></p>
<p><strong>Rollup Job</strong> is a special <strong>Compact Job</strong>, which mainly deals with data reduction (<strong>DownSampling</strong>), namely <strong>10s-&gt;5m-&gt;1h</strong>, its core logic is same as <strong>Compaction Job</strong>, the main differences are as follows :</p>
<ol>
<li><strong>Source Family</strong> merges data into <strong>Target Family</strong> to operate <strong>2</strong> <strong>Family</strong>;</li>
<li>After the merging is completed, delete the files that need <strong>Rollup</strong> in <strong>Source Family Version</strong>, and record the files that have been <strong>Rollup</strong> in <strong>Target Family Version</strong> to prevent duplicate data merging;</li>
</ol>
<h3 id="sstable-layout" heading="3" href="#sstable-layout"><a class="group relative border-none lg:-ml-2 lg:pl-2" href="/docs/lindb/design/storage#sstable-layout"><span class="absolute -ml-8 hidden items-center border-0 opacity-0 group-hover:opacity-100 group-focus:opacity-100 lg:flex">​<span class="flex size-6 items-center justify-center rounded-md text-slate-400 shadow-sm ring-1 ring-slate-900/5 hover:text-slate-700 hover:shadow hover:ring-slate-900/10 dark:bg-slate-800 dark:text-slate-400 dark:shadow-none dark:ring-0 dark:hover:bg-slate-700 dark:hover:text-slate-200"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></span></span>SSTable layout</a></h3>
<p><span class="not-prose flex flex-col text-center"><img src="/img/lindb/design/storage_sstable.png" alt="SSTable" decoding="async" class="mx-auto"/><span class="mt-2 text-sm font-semibold italic">SSTable</span></span></p>
<p>The structure of each <strong>SSTable</strong> is shown in the figure above, and it mainly has the following components:</p>
<ul>
<li><strong>Footer Block</strong>: Storing <strong>Magic Number(8 Bytes) + Version(1 byte) + Index Block Offset(4 bytes) + Offset Block Offset(4 bytes)</strong>, which can be accessed through both <strong>Index Block Offset</strong> and <strong>Offset Block</strong> to read contents of <strong>Index Block</strong> and <strong>Offset Block</strong>;</li>
<li><strong>Index Block</strong>: Using <strong>Roaring Bitmap</strong> to store all the <strong>Keys</strong> in the current <strong>SSTable</strong> file, as all <strong>Key</strong> are <strong>uint32</strong>, so we can directly use <strong>Roaring Bitmap</strong> to store, such benefits is that we can use <strong>Roaring Bitmap</strong> to determine whether a <strong>Key</strong> exists, and at the same time we can also know the position of this <strong>Key</strong> in this <strong>Roaring Bitmap</strong>;</li>
<li><strong>Offset Block</strong>: store all the <strong>Offset</strong> of <strong>Value Entry</strong>, and each <strong>Offset</strong> is stored with a fixed length, so if it is found in the <strong>Nth</strong> position in the <strong>Index Block</strong>, The <strong>Offset</strong> of that <strong>Value Entry</strong> is the data pointed to by <strong>N * Offset Length</strong>;</li>
<li><strong>Value Entry</strong>: store the <strong>Value</strong> corresponding to each <strong>Key/Value</strong>, because the <strong>Key</strong> is already stored in the <strong>Index Block</strong>, so the <strong>Value Entry</strong> only needs to store the <strong>Value</strong> in the <strong>Key/Value</strong>;</li>
</ul>
<p>The advantage of this is that the compression of <strong>Key</strong> can be done well, and <strong>Roaring Bitmap</strong> has done a lot of optimization on <strong>Bitmap</strong>, <strong>Get</strong> data through <strong>Key</strong> is very efficient, because it is not like <strong>LevelDB</strong>, binary searching <strong>Key</strong> in the middle process are not required, and the <strong>Bitmap</strong> can be resident in memory.</p>
<p>Based on the above storage structure, the entire query logic is as follows:</p>
<ol>
<li>Through <strong>Index Block</strong>, we can directly know whether the queried <strong>Key</strong> exists. If it does not exist, return it directly. If it exists, get the first position (<strong>Index</strong>) in the <strong>Bitmap</strong>;</li>
<li>First jump: According to the <strong>Index</strong> obtained above, in <strong>Offset Block</strong>, after skipping <strong>Index * Offset Length</strong>, we can get <strong>Value Entry Offset(Position)</strong>;</li>
<li>The second jump: According to the <strong>Position</strong> obtained above, skip the <strong>Position</strong> at the beginning of the file and then the desired <strong>Value</strong> can be read directly;</li>
</ol>
<p>If we want to do the <strong>Scan</strong> operation, just directly read the sequence based on the <strong>Index Block</strong> and <strong>Offset Blcok</strong>.</p>
<h6 id="reference" heading="6" href="#reference"><a class="group relative border-none lg:-ml-2 lg:pl-2" href="/docs/lindb/design/storage#reference"><span class="absolute -ml-8 hidden items-center border-0 opacity-0 group-hover:opacity-100 group-focus:opacity-100 lg:flex">​<span class="flex size-6 items-center justify-center rounded-md text-slate-400 shadow-sm ring-1 ring-slate-900/5 hover:text-slate-700 hover:shadow hover:ring-slate-900/10 dark:bg-slate-800 dark:text-slate-400 dark:shadow-none dark:ring-0 dark:hover:bg-slate-700 dark:hover:text-slate-200"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></span></span>Reference</a></h6>
<ol>
<li><a target="_blank" href="http://roaringbitmap.org"><em>RoaringBitMap</em><span class="ml-1 inline-flex"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="size-4 fill-sky-500"><path fill-rule="evenodd" d="M15.75 2.25H21a.75.75 0 0 1 .75.75v5.25a.75.75 0 0 1-1.5 0V4.81L8.03 17.03a.75.75 0 0 1-1.06-1.06L19.19 3.75h-3.44a.75.75 0 0 1 0-1.5Zm-10.5 4.5a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h10.5a1.5 1.5 0 0 0 1.5-1.5V10.5a.75.75 0 0 1 1.5 0v8.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h8.25a.75.75 0 0 1 0 1.5H5.25Z" clip-rule="evenodd"></path></svg></span></a></li>
<li><a target="_blank" href="http://opentsdb.net/docs/build/html/user_guide/uids.html"><em>OpenTSDB UID</em><span class="ml-1 inline-flex"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="size-4 fill-sky-500"><path fill-rule="evenodd" d="M15.75 2.25H21a.75.75 0 0 1 .75.75v5.25a.75.75 0 0 1-1.5 0V4.81L8.03 17.03a.75.75 0 0 1-1.06-1.06L19.19 3.75h-3.44a.75.75 0 0 1 0-1.5Zm-10.5 4.5a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h10.5a1.5 1.5 0 0 0 1.5-1.5V10.5a.75.75 0 0 1 1.5 0v8.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h8.25a.75.75 0 0 1 0 1.5H5.25Z" clip-rule="evenodd"></path></svg></span></a></li>
<li><a target="_blank" href="https://rocksdb.org/"><em>RocksDB</em><span class="ml-1 inline-flex"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="size-4 fill-sky-500"><path fill-rule="evenodd" d="M15.75 2.25H21a.75.75 0 0 1 .75.75v5.25a.75.75 0 0 1-1.5 0V4.81L8.03 17.03a.75.75 0 0 1-1.06-1.06L19.19 3.75h-3.44a.75.75 0 0 1 0-1.5Zm-10.5 4.5a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h10.5a1.5 1.5 0 0 0 1.5-1.5V10.5a.75.75 0 0 1 1.5 0v8.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h8.25a.75.75 0 0 1 0 1.5H5.25Z" clip-rule="evenodd"></path></svg></span></a></li>
</ol></div><div class="mt-12 border-t border-slate-200 pt-6 text-sm leading-6 dark:border-slate-800"><div class="mb-10 flex items-center font-semibold text-slate-700 dark:text-slate-200"><div><div class="ml-1 text-xs text-slate-900 dark:text-white">Previous</div><a target="_self" class="group flex items-center text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/design/query"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-4 text-slate-400 group-hover:text-slate-600 dark:group-hover:text-slate-300"><path fill-rule="evenodd" d="M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z" clip-rule="evenodd"></path></svg>Query</a></div><div class="ml-auto text-right"><div class="mr-1 text-xs text-slate-900 dark:text-white">Next</div><a target="_self" class="group flex items-center text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/design/memory-database">Memory database<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-4 text-slate-400 group-hover:text-slate-600 dark:group-hover:text-slate-300"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></a></div></div></div><div><div class="group fixed right-5 top-[4em] z-50 flex rounded bg-gray-200 p-1 shadow-md shadow-gray-200 ring-1 ring-gray-200 lg:right-6 lg:top-20 xl:hidden dark:bg-slate-800 dark:shadow-slate-600 dark:ring-slate-600" data-headlessui-state=""><button type="button" aria-expanded="false" data-headlessui-state=""><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="size-6 fill-gray-400 stroke-gray-400 dark:fill-slate-500 dark:shadow-slate-600"><path fill-rule="evenodd" d="M2.625 6.75a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0A.75.75 0 0 1 8.25 6h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75ZM2.625 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0ZM7.5 12a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12A.75.75 0 0 1 7.5 12Zm-4.875 5.25a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg></button></div><div hidden="" style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div><div class="fixed bottom-0 right-[max(0px,calc(50%-45rem))] top-[3.8125rem] z-20 hidden w-[19.5rem] overflow-y-auto py-10 xl:block"><div class="px-2 xl:px-8"><h5 class="mb-2 text-sm font-semibold leading-6 text-slate-900 dark:text-slate-100">On this page</h5><ul class="text-sm leading-6 text-slate-700"><li><a target="_self" class="flex items-center gap-1 py-1 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/design/storage#time-series-characteristics">Time series characteristics</a></li><li><a target="_self" class="flex items-center gap-1 py-1 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/design/storage#storage-structure">Storage structure</a></li><li><a target="_self" class="flex items-center gap-1 py-1 ml-4 group flex items-start py-1 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/design/storage#database"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="size-3"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg>Database</a></li><li><a target="_self" class="flex items-center gap-1 py-1 ml-4 group flex items-start py-1 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/design/storage#shard"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="size-3"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg>Shard</a></li><li><a target="_self" class="flex items-center gap-1 py-1 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/design/storage#kv-store">KV store</a></li><li><a target="_self" class="flex items-center gap-1 py-1 ml-4 group flex items-start py-1 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/design/storage#compaction"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="size-3"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg>Compaction</a></li><li><a target="_self" class="flex items-center gap-1 py-1 ml-4 group flex items-start py-1 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/design/storage#rollup"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="size-3"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg>Rollup</a></li><li><a target="_self" class="flex items-center gap-1 py-1 ml-4 group flex items-start py-1 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/docs/lindb/design/storage#sstable-layout"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="size-3"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg>SSTable layout</a></li></ul><div class="border-t border-slate-200 pt-3 text-sm leading-6 text-slate-700 sm:flex dark:border-slate-200/5"><a target="_blank" class="flex items-center gap-2 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="https://github.com/lindb/lindb.github.io/edit/main/docs/lindb/10-design/05-storage.mdx"><svg viewBox="0 0 16 16" class="size-4" fill="currentColor" aria-hidden="true"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>Edit this page on Github</a></div></div></div></div><footer class="justify-self-end py-4 lg:pt-8"><div class="mx-auto max-w-8xl"><div class="mx-8 grid gap-4 sm:gap-8 lg:mx-0 lg:grid-cols-8 lg:gap-12 lg:px-8"><div class="col-span-4 mb-6 lg:mb-0"><p class="flex items-center gap-4 font-semibold italic text-slate-900 dark:text-slate-100">An open-source, cloud native, observabilty platform</p><p class="flex items-center gap-2 pt-3 lg:gap-5 lg:pt-6"><a target="_blank" class="block text-slate-600 hover:text-slate-700 dark:text-gray-200 dark:hover:text-slate-300" href="https://github.com/lindb/lindb"><span class="sr-only">LinDB on GitHub</span><svg viewBox="0 0 16 16" class="size-5" fill="currentColor" aria-hidden="true"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a><a target="_blank" class="block text-slate-600 hover:text-slate-700 dark:text-gray-200 dark:hover:text-slate-300" href="https://x.com/lindb_io"><span class="sr-only">LinDB on Twitter</span><svg class="size-5" width="48" height="50" viewBox="0 0 48 50" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M28.5665 20.7714L46.4356 0H42.2012L26.6855 18.0355L14.2931 0H0L18.7397 27.2728L0 49.0548H4.23464L20.6196 30.0087L33.7069 49.0548H48L28.5655 20.7714H28.5665ZM22.7666 27.5131L5.76044 3.18778H12.2646L42.2032 46.012H35.699L22.7666 27.5142V27.5131Z" fill="currentColor"></path></svg></a></p></div><div class="col-span-2"><h3 class="mb-4 text-sm font-semibold text-slate-900 dark:text-slate-100">Open source</h3><ul><li class="mb-2"><a target="_blank" class="hover:text-stone-900 dark:hover:text-slate-300" href="https://github.com/lindb/linsight">Linsight</a></li><li class="mb-2"><a target="_blank" class="hover:text-stone-900 dark:hover:text-slate-300" href="https://github.com/lindb/lingo">Lingo</a></li><li class="mb-2"><a target="_self" class="hover:text-stone-900 dark:hover:text-slate-300" href="/oss/lindb">LinDB</a></li></ul></div><div class="col-span-2"><h3 class="mb-4 text-sm font-semibold text-slate-900 dark:text-slate-100">Resources</h3><ul><li class="mb-2"><a target="_self" class="hover:text-stone-900 dark:hover:text-slate-300" href="/docs/lindb/introduction">Documentation</a></li><li class="mb-2"><a target="_self" class="hover:text-stone-900 dark:hover:text-slate-300" href="/downloads/lindb">Downloads</a></li></ul></div></div><hr class="my-4 border-gray-200 dark:border-gray-700"/><span class="block text-center text-sm font-normal text-gray-600 dark:text-gray-400">Copyright © <!-- -->2024<!-- --> Lin Labs Inc. All Rights Reserved.</span></div></footer></div></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"page":{"path":"/docs/lindb/10-design/05-storage.mdx","meta":{"title":"Storage"},"title":"Storage","parent":"Design","commitInfo":{"author":"stone1100","date":"Mon Jun 24 07:03:27 2024"}},"source":{"compiledSource":"\"use strict\";\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = {\n    a: \"a\",\n    code: \"code\",\n    div: \"div\",\n    em: \"em\",\n    h2: \"h2\",\n    h3: \"h3\",\n    h6: \"h6\",\n    img: \"img\",\n    li: \"li\",\n    ol: \"ol\",\n    p: \"p\",\n    path: \"path\",\n    pre: \"pre\",\n    span: \"span\",\n    strong: \"strong\",\n    svg: \"svg\",\n    ul: \"ul\",\n    ..._provideComponents(),\n    ...props.components\n  };\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"All data of \", _jsx(_components.strong, {\n        children: \"LinDB\"\n      }), \" will be stored on the local disk, and there are different storage structures according to different data types:\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Metirc Metadata\"\n        }), \": store \", _jsx(_components.strong, {\n          children: \"Metric Name\"\n        }), \" and its underlying \", _jsx(_components.strong, {\n          children: \"Fields\"\n        }), \"/\", _jsx(_components.strong, {\n          children: \"Tag Keys\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Tags(Series) Index\"\n        }), \": store all \", _jsx(_components.strong, {\n          children: \"Tags\"\n        }), \" under a \", _jsx(_components.strong, {\n          children: \"Metric\"\n        }), \", this part is divided into \", _jsx(_components.strong, {\n          children: \"2\"\n        }), \" data types;\", \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsxs(_components.li, {\n            children: [\"Forward: \", _jsx(_components.strong, {\n              children: \"Tags\"\n            }), \" corresponding to \", _jsx(_components.strong, {\n              children: \"Series ID\"\n            }), \";\"]\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [\"Inverted: The inverted index of \", _jsx(_components.strong, {\n              children: \"Tag Key/Value\"\n            }), \", where  \", _jsx(_components.strong, {\n              children: \"Series ID\"\n            }), \" are binding to \", _jsx(_components.strong, {\n              children: \"Tag Value\"\n            }), \". \", _jsx(_components.strong, {\n              children: \"Series ID\"\n            }), \" set is compressed stored by \", _jsx(_components.a, {\n              href: \"http://roaringbitmap.org\",\n              children: \"RoaringBitMap\"\n            }), \" ;\"]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Data\"\n        }), \": Storage of \", _jsx(_components.strong, {\n          children: \"Data Point\"\n        }), \" under all \", _jsx(_components.strong, {\n          children: \"Time Series\"\n        }), \";\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"All the above data types are stored in a common underlying \", _jsx(_components.strong, {\n        children: \"KV Store\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Time series characteristics\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Before talking about storage, let's talk about the characteristics of time-series, as shown in the figure:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/img/lindb/design/time_series_characteristic.png\",\n        alt: \"Time series characteristics\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Time series data characteristics (according to its time characteristics, it can be divided into time-invariant and time-variant data)\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Time Series\"\n        }), \" =\u003e \", _jsx(_components.strong, {\n          children: \"Metric + Tags\"\n        }), \": This part of the data is basically a string, and this data occupies the bulk of the data packet, but it will not vary with time flows.\\nConverting these strings into numerical values for storage to reduce storage costs;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Fields\"\n        }), \": This part of the data is basically numeric and changes with time, but the numeric type is easy to compress;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Storage structure\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Database\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/img/lindb/design/storage_database.png\",\n        alt: \"storage database\"\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"The data of a database are distributed on different nodes of the \", _jsx(_components.strong, {\n          children: \"Storage\"\n        }), \" cluster according to \", _jsx(_components.strong, {\n          children: \"Shard\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"A \", _jsx(_components.strong, {\n          children: \"Shard\"\n        }), \" can have multiple replicas, please see \", _jsx(_components.a, {\n          href: \"/docs/lindb/design/replication\",\n          children: \"Replication\"\n        }), \" for details;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Shard\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"shiki shiki-themes material-theme-lighter catppuccin-macchiato language-sh\",\n      style: {\n        backgroundColor: \"#FAFAFA\",\n        \"--shiki-dark-bg\": \"#1e293b\",\n        color: \"#90A4AE\",\n        \"--shiki-dark\": \"#cad3f5\"\n      },\n      tabIndex: \"0\",\n      children: _jsxs(_components.code, {\n        className: \"language-sh\",\n        children: [_jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" db_test_1\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" meta\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" namespace\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" metric\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" field\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" tagkey\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" tagvalue\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" shard\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \"     ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 1\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" inverted\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" forward\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" segment\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"     ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" day\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 20190101\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 01\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 02\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 23\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 20190102\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"     ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" month\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 201901\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 01\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 02\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 31\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 201902\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"     └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" year\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"        ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 2019\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"        |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 01\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"        |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 02\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"        |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 12\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"        └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 2020\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \"     └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 2\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"└─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" db_test_2\"\n          })]\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"line\"\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The storage directory above describes how data are stored on a \", _jsx(_components.strong, {\n        children: \"Storage\"\n      }), \" node.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Taking the data structure of a single database on a single node as an example:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"meta\"\n        }), \": store all \", _jsx(_components.strong, {\n          children: \"metadata\"\n        }), \", at database level:\", \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsx(_components.li, {\n            children: _jsx(_components.strong, {\n              children: \"namespace\"\n            })\n          }), \"\\n\", _jsx(_components.li, {\n            children: _jsx(_components.strong, {\n              children: \"metric\"\n            })\n          }), \"\\n\", _jsx(_components.li, {\n            children: _jsx(_components.strong, {\n              children: \"field\"\n            })\n          }), \"\\n\", _jsx(_components.li, {\n            children: _jsx(_components.strong, {\n              children: \"tag key\"\n            })\n          }), \"\\n\", _jsx(_components.li, {\n            children: _jsx(_components.strong, {\n              children: \"tag value\"\n            })\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"shard\"\n        }), \": A database will have multiple \", _jsx(_components.strong, {\n          children: \"shard\"\n        }), \"s on a single node, and each \", _jsx(_components.strong, {\n          children: \"shard\"\n        }), \" has the following data:\", \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"index\"\n            }), \": store forward and reverse indexes;\"]\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"segment\"\n            }), \": store the data of each time slice;\"]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"See \", _jsx(_components.a, {\n        href: \"/docs/lindb/design/inverted-index\",\n        children: \"Invertd Index\"\n      }), \" for the structure of \", _jsx(_components.strong, {\n        children: \"meta\"\n      }), \" and \", _jsx(_components.strong, {\n        children: \"index\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"All data are divided into different parts by the \", _jsx(_components.strong, {\n        children: \"Interval\"\n      }), \" of the database to store specific data in time slices:\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"The time series has strong time correlation, which makes it easier for querying;\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Convenient for handling \", _jsx(_components.strong, {\n          children: \"TTL\"\n        }), \". If the data expires, just delete the corresponding directory directly;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"There are multiple \", _jsx(_components.strong, {\n          children: \"segments\"\n        }), \" under each \", _jsx(_components.strong, {\n          children: \"shard\"\n        }), \", and each \", _jsx(_components.strong, {\n          children: \"segment\"\n        }), \" stores the data of the corresponding time slice according to the corresponding \", _jsx(_components.strong, {\n          children: \"interval\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Why are there many \", _jsx(_components.strong, {\n          children: \"data families\"\n        }), \" stored according to \", _jsx(_components.strong, {\n          children: \"interval\"\n        }), \" under each \", _jsx(_components.strong, {\n          children: \"segment\"\n        }), \"? This is mainly because the main problem solved by \", _jsx(_components.strong, {\n          children: \"LinDB\"\n        }), \" is to store a large amount of monitoring data. The general monitoring data is basically written at the latest time, and basically no historical data will be written. The data storage of the entire \", _jsx(_components.strong, {\n          children: \"LinDB\"\n        }), \" is similar to the \", _jsx(_components.strong, {\n          children: \"LSM\"\n        }), \" method, in order to reduce the merge operation between data files which leads to write amplification. then the re-sharding policy of \", _jsx(_components.strong, {\n          children: \"segment\"\n        }), \" time slice is adopted.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The following is an example of \", _jsx(_components.strong, {\n        children: \"interval\"\n      }), \" being \", _jsx(_components.strong, {\n        children: \"10s\"\n      }), \":\"]\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"segment\"\n        }), \" is stored by day;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Each \", _jsx(_components.strong, {\n          children: \"segment\"\n        }), \" is divided into \", _jsx(_components.strong, {\n          children: \"data family\"\n        }), \" by hour, one \", _jsx(_components.strong, {\n          children: \"family\"\n        }), \" per hour, and the files in each \", _jsx(_components.strong, {\n          children: \"family\"\n        }), \" store specific data in columns;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"KV store\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"shiki shiki-themes material-theme-lighter catppuccin-macchiato language-sh\",\n      style: {\n        backgroundColor: \"#FAFAFA\",\n        \"--shiki-dark-bg\": \"#1e293b\",\n        color: \"#90A4AE\",\n        \"--shiki-dark\": \"#cad3f5\"\n      },\n      tabIndex: \"0\",\n      children: _jsxs(_components.code, {\n        className: \"language-sh\",\n        children: [_jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"└─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" kv_store_1\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"   ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" CURRENT\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"   ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" LOCK\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"   ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" MANIFEST-000010\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"   ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" OPTIONS\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"   ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" family_1\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"   |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 000001.sst\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"   |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 000002.sst\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"   |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 000004.sst\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"   |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 000008.sst\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"   ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" family_2\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"   |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 000011.sst\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"   |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 000012.sst\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"   |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 000014.sst\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"   |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 000018.sst\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"   └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" family_3\"\n          })]\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"line\"\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The whole \", _jsx(_components.strong, {\n        children: \"KV Store\"\n      }), \" is similar to \", _jsx(_components.strong, {\n        children: \"LSM\"\n      }), \", but it is different from \", _jsx(_components.strong, {\n        children: \"LSM\"\n      }), \". The main differences are as follows:\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"There is no \", _jsx(_components.strong, {\n          children: \"Memory Table\"\n        }), \", because the whole system has a \", _jsx(_components.strong, {\n          children: \"Memory Database\"\n        }), \" to store all recently data, and these data will be directly written to the \", _jsx(_components.strong, {\n          children: \"KV Store\"\n        }), \" later;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Key\"\n        }), \"'s type is \", _jsx(_components.strong, {\n          children: \"uint32\"\n        }), \", because all \", _jsx(_components.strong, {\n          children: \"string\"\n        }), \" will be converted to \", _jsx(_components.strong, {\n          children: \"uint32\"\n        }), \" according to the timing characteristics, so the underlying \", _jsx(_components.strong, {\n          children: \"KV Store\"\n        }), \" is directly designed as an \", _jsx(_components.strong, {\n          children: \"uint32 =\u003e binary\"\n        }), \" structure;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The directory structure is very similar to \", _jsx(_components.strong, {\n        children: \"rocksdb\"\n      }), \" and supports \", _jsx(_components.strong, {\n        children: \"column family\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"CURRENT\"\n        }), \": record the currently valid \", _jsx(_components.strong, {\n          children: \"MANIFEST\"\n        }), \" file;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"LOCK\"\n        }), \": file lock to prevent multiple processes from opening the same \", _jsx(_components.strong, {\n          children: \"KV Store\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"MANIFEST\"\n        }), \": \", _jsx(_components.strong, {\n          children: \"change log\"\n        }), \" of all \", _jsx(_components.strong, {\n          children: \"sstable\"\n        }), \" changes, including some \", _jsx(_components.strong, {\n          children: \"change log\"\n        }), \" of \", _jsx(_components.strong, {\n          children: \"sequence\"\n        }), \", etc.;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"OPTIONS\"\n        }), \": \", _jsx(_components.strong, {\n          children: \"KV Store\"\n        }), \" configuration information, including configuration information at each \", _jsx(_components.strong, {\n          children: \"column family\"\n        }), \" level;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"KV Store\"\n        }), \" can store multiple \", _jsx(_components.strong, {\n          children: \"column families\"\n        }), \", and each \", _jsx(_components.strong, {\n          children: \"family\"\n        }), \" stores multiple \", _jsx(_components.strong, {\n          children: \"sstable\"\n        }), \" files;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Compaction\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/img/lindb/design/storage_compaction.png\",\n        alt: \"Compaction\"\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Each \", _jsx(_components.strong, {\n          children: \"KV Store\"\n        }), \" will start a \", _jsx(_components.strong, {\n          children: \"Goroutine\"\n        }), \" periodically to \", _jsx(_components.strong, {\n          children: \"Check\"\n        }), \" whether there are too many files in each \", _jsx(_components.strong, {\n          children: \"Family Level 0\"\n        }), \" and meet the conditions of \", _jsx(_components.strong, {\n          children: \"Compaction\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"When the conditions are met, the corresponding \", _jsx(_components.strong, {\n          children: \"Family\"\n        }), \" will be notified to execute \", _jsx(_components.strong, {\n          children: \"Compaction Job\"\n        }), \", if another \", _jsx(_components.strong, {\n          children: \"Compaction\"\n        }), \" job is being executed, this operation will be ignored, all operations will only be done in one \", _jsx(_components.strong, {\n          children: \"Goroutine\"\n        }), \",of which the benefit is lock-free , because \", _jsx(_components.strong, {\n          children: \"Compaction Job\"\n        }), \" is a very heavy operation, and if locking is required, it may affect the writing of new files\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Compaction\"\n      }), \" mainly merges the files in \", _jsx(_components.strong, {\n        children: \"Level 0\"\n      }), \" into \", _jsx(_components.strong, {\n        children: \"Level 1\"\n      }), \". Currently, \", _jsx(_components.strong, {\n        children: \"LinDB\"\n      }), \" has only 2 Level, which is different from \", _jsx(_components.strong, {\n        children: \"LevelDB\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Compaction\"\n      }), \" condition: any one of the following conditions will trigger the Compact task:\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"the number of files in \", _jsx(_components.strong, {\n          children: \"Level 0\"\n        }), \" exceeds the number of files configured;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"There are 2 merge process:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Directly moving the files of \", _jsx(_components.strong, {\n          children: \"Level 0\"\n        }), \" to \", _jsx(_components.strong, {\n          children: \"Level 1\"\n        }), \", but the conditions of \", _jsx(_components.strong, {\n          children: \"compact\"\n        }), \" should be met: the number of files of \", _jsx(_components.strong, {\n          children: \"pick files from level 0\"\n        }), \" is \", _jsx(_components.strong, {\n          children: \"1\"\n        }), \", the number of files of \", _jsx(_components.strong, {\n          children: \"pick fiels from level 1\"\n        }), \" is \", _jsx(_components.strong, {\n          children: \"1\"\n        }), \" The number of files is \", _jsx(_components.strong, {\n          children: \"0\"\n        }), \", that is, only one file needs to be merged, just modify \", _jsx(_components.strong, {\n          children: \"Metadata\"\n        }), \";\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Need to combine multiple files into one large file;\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.strong, {\n        children: \"Compact\"\n      }), \" process is as follows:\"]\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Select the file that needs \", _jsx(_components.strong, {\n          children: \"Compact\"\n        }), \", firstly select the current \", _jsx(_components.strong, {\n          children: \"level 0\"\n        }), \" file, then traverse each \", _jsx(_components.strong, {\n          children: \"level 0\"\n        }), \" file, press \", _jsx(_components.strong, {\n          children: \"key range\"\n        }), \" to get the overlapping file from \", _jsx(_components.strong, {\n          children: \"level 1\"\n        }), \", why is here? Fetch \", _jsx(_components.strong, {\n          children: \"level 1\"\n        }), \" files by each \", _jsx(_components.strong, {\n          children: \"level 0\"\n        }), \" file, not by the final \", _jsx(_components.strong, {\n          children: \"key range\"\n        }), \" in \", _jsx(_components.strong, {\n          children: \"level 0\"\n        }), \". Because the \", _jsx(_components.strong, {\n          children: \"keys\"\n        }), \" of the entire \", _jsx(_components.strong, {\n          children: \"level 0\"\n        }), \" file may be relatively hashed, so if we take the final \", _jsx(_components.strong, {\n          children: \"range\"\n        }), \", we may get a large range. E.g:\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"shiki shiki-themes material-theme-lighter catppuccin-macchiato language-yaml\",\n      style: {\n        backgroundColor: \"#FAFAFA\",\n        \"--shiki-dark-bg\": \"#1e293b\",\n        color: \"#90A4AE\",\n        \"--shiki-dark\": \"#cad3f5\"\n      },\n      tabIndex: \"0\",\n      children: _jsxs(_components.code, {\n        className: \"language-yaml\",\n        children: [_jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E53935\",\n              \"--shiki-dark\": \"#8AADF4\"\n            },\n            children: \"for example\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \":\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E53935\",\n              \"--shiki-dark\": \"#8AADF4\"\n            },\n            children: \"Level 0\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \":\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E53935\",\n              \"--shiki-dark\": \"#8AADF4\"\n            },\n            children: \"    file 1\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \":\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 1~10\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E53935\",\n              \"--shiki-dark\": \"#8AADF4\"\n            },\n            children: \"    file 2\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \":\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 1000~1001\"\n          })]\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"line\",\n          children: _jsx(_components.span, {\n            style: {\n              color: \"#90A4AE\",\n              \"--shiki-dark\": \"#CAD3F5\"\n            },\n            children: \"    \"\n          })\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E53935\",\n              \"--shiki-dark\": \"#8AADF4\"\n            },\n            children: \"Level 1\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \":\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E53935\",\n              \"--shiki-dark\": \"#8AADF4\"\n            },\n            children: \"    file 3\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \":\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 1~5\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E53935\",\n              \"--shiki-dark\": \"#8AADF4\"\n            },\n            children: \"    file 4\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \":\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 100~200\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E53935\",\n              \"--shiki-dark\": \"#8AADF4\"\n            },\n            children: \"    file 5\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \":\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 400~500\"\n          })]\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"line\",\n          children: _jsx(_components.span, {\n            style: {\n              color: \"#90A4AE\",\n              \"--shiki-dark\": \"#CAD3F5\"\n            },\n            children: \"    \"\n          })\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#939AB7\"\n            },\n            children: \"-\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" If we press the final range of level 0, 1~1001, this will take out all the files of level 1\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#939AB7\"\n            },\n            children: \"-\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" If we take it according to the range of each level 0, we only need to take the file 3 (1~5) in the end.\"\n          })]\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"line\"\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.ol, {\n      start: \"2\",\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"The entire \", _jsx(_components.strong, {\n          children: \"compact\"\n        }), \" process is actually a multi-way merge process. Since the \", _jsx(_components.strong, {\n          children: \"key\"\n        }), \" is sorted when \", _jsx(_components.strong, {\n          children: \"flush\"\n        }), \" writes files, \", _jsx(_components.strong, {\n          children: \"compact\"\n        }), \" only needs to read each file in order, and press ** The order of key** can traverse the data from these files;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"During the process, the data with the same \", _jsx(_components.strong, {\n          children: \"key\"\n        }), \" needs to be merged. The merging process needs to be merged according to different data types, and the \", _jsx(_components.strong, {\n          children: \"Merger Interface\"\n        }), \" needs to be implemented;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"If \", _jsx(_components.strong, {\n          children: \"key\"\n        }), \" does not need the merge operation, write the corresponding data directly to the file, which can reduce unnecessary serialization operations;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.ol, {\n      start: \"3\",\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Once \", _jsx(_components.strong, {\n          children: \"compact\"\n        }), \" merging and writing files is successfully completed, submitting \", _jsx(_components.strong, {\n          children: \"Version Edit\"\n        }), \" to \", _jsx(_components.strong, {\n          children: \"Version Set\"\n        }), \" will be taken. At this time, \", _jsx(_components.strong, {\n          children: \"Version Edit\"\n        }), \" includes newly written files and old files that need to be deleted. This process requires locks;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Delete those useless files: such as files that have been merged, or some intermediate result files after failure. It should be noted here that the cleanup operation must be done after the \", _jsx(_components.strong, {\n          children: \"Version Edit\"\n        }), \" is successfully submitted to the \", _jsx(_components.strong, {\n          children: \"Version Set\"\n        }), \", otherwise which may leads to data file confusion;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.div, {\n      className: \"markdown-alert markdown-alert-tip\",\n      dir: \"auto\",\n      children: [\"\\n\", _jsxs(_components.p, {\n        className: \"markdown-alert-title\",\n        dir: \"auto\",\n        children: [_jsx(_components.svg, {\n          className: \"octicon\",\n          viewBox: \"0 0 16 16\",\n          width: \"16\",\n          height: \"16\",\n          \"aria-hidden\": \"true\",\n          children: _jsx(_components.path, {\n            d: \"M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z\"\n          })\n        }), \"TIP\"]\n      }), \"\\n\", _jsx(_components.p, {}), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"Version Edit: Similar to LevelDB, a Version Edit will be recorded for each file write operation, and Version Edit will record new files/deleted files, so that when the system restarts or crashes, just reload the Version Edit Log again. There are those that mention the whole useful document;\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"Version Set: record which files are currently stored and available;\"\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Rollup\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/img/lindb/design/storage_rollup.png\",\n        alt: \"Rollup\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Rollup Job\"\n      }), \" is a special \", _jsx(_components.strong, {\n        children: \"Compact Job\"\n      }), \", which mainly deals with data reduction (\", _jsx(_components.strong, {\n        children: \"DownSampling\"\n      }), \"), namely \", _jsx(_components.strong, {\n        children: \"10s-\u003e5m-\u003e1h\"\n      }), \", its core logic is same as \", _jsx(_components.strong, {\n        children: \"Compaction Job\"\n      }), \", the main differences are as follows :\"]\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Source Family\"\n        }), \" merges data into \", _jsx(_components.strong, {\n          children: \"Target Family\"\n        }), \" to operate \", _jsx(_components.strong, {\n          children: \"2\"\n        }), \" \", _jsx(_components.strong, {\n          children: \"Family\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"After the merging is completed, delete the files that need \", _jsx(_components.strong, {\n          children: \"Rollup\"\n        }), \" in \", _jsx(_components.strong, {\n          children: \"Source Family Version\"\n        }), \", and record the files that have been \", _jsx(_components.strong, {\n          children: \"Rollup\"\n        }), \" in \", _jsx(_components.strong, {\n          children: \"Target Family Version\"\n        }), \" to prevent duplicate data merging;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"SSTable layout\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/img/lindb/design/storage_sstable.png\",\n        alt: \"SSTable\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The structure of each \", _jsx(_components.strong, {\n        children: \"SSTable\"\n      }), \" is shown in the figure above, and it mainly has the following components:\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Footer Block\"\n        }), \": Storing \", _jsx(_components.strong, {\n          children: \"Magic Number(8 Bytes) + Version(1 byte) + Index Block Offset(4 bytes) + Offset Block Offset(4 bytes)\"\n        }), \", which can be accessed through both \", _jsx(_components.strong, {\n          children: \"Index Block Offset\"\n        }), \" and \", _jsx(_components.strong, {\n          children: \"Offset Block\"\n        }), \" to read contents of \", _jsx(_components.strong, {\n          children: \"Index Block\"\n        }), \" and \", _jsx(_components.strong, {\n          children: \"Offset Block\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Index Block\"\n        }), \": Using \", _jsx(_components.strong, {\n          children: \"Roaring Bitmap\"\n        }), \" to store all the \", _jsx(_components.strong, {\n          children: \"Keys\"\n        }), \" in the current \", _jsx(_components.strong, {\n          children: \"SSTable\"\n        }), \" file, as all \", _jsx(_components.strong, {\n          children: \"Key\"\n        }), \" are \", _jsx(_components.strong, {\n          children: \"uint32\"\n        }), \", so we can directly use \", _jsx(_components.strong, {\n          children: \"Roaring Bitmap\"\n        }), \" to store, such benefits is that we can use \", _jsx(_components.strong, {\n          children: \"Roaring Bitmap\"\n        }), \" to determine whether a \", _jsx(_components.strong, {\n          children: \"Key\"\n        }), \" exists, and at the same time we can also know the position of this \", _jsx(_components.strong, {\n          children: \"Key\"\n        }), \" in this \", _jsx(_components.strong, {\n          children: \"Roaring Bitmap\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Offset Block\"\n        }), \": store all the \", _jsx(_components.strong, {\n          children: \"Offset\"\n        }), \" of \", _jsx(_components.strong, {\n          children: \"Value Entry\"\n        }), \", and each \", _jsx(_components.strong, {\n          children: \"Offset\"\n        }), \" is stored with a fixed length, so if it is found in the \", _jsx(_components.strong, {\n          children: \"Nth\"\n        }), \" position in the \", _jsx(_components.strong, {\n          children: \"Index Block\"\n        }), \", The \", _jsx(_components.strong, {\n          children: \"Offset\"\n        }), \" of that \", _jsx(_components.strong, {\n          children: \"Value Entry\"\n        }), \" is the data pointed to by \", _jsx(_components.strong, {\n          children: \"N * Offset Length\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Value Entry\"\n        }), \": store the \", _jsx(_components.strong, {\n          children: \"Value\"\n        }), \" corresponding to each \", _jsx(_components.strong, {\n          children: \"Key/Value\"\n        }), \", because the \", _jsx(_components.strong, {\n          children: \"Key\"\n        }), \" is already stored in the \", _jsx(_components.strong, {\n          children: \"Index Block\"\n        }), \", so the \", _jsx(_components.strong, {\n          children: \"Value Entry\"\n        }), \" only needs to store the \", _jsx(_components.strong, {\n          children: \"Value\"\n        }), \" in the \", _jsx(_components.strong, {\n          children: \"Key/Value\"\n        }), \";\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The advantage of this is that the compression of \", _jsx(_components.strong, {\n        children: \"Key\"\n      }), \" can be done well, and \", _jsx(_components.strong, {\n        children: \"Roaring Bitmap\"\n      }), \" has done a lot of optimization on \", _jsx(_components.strong, {\n        children: \"Bitmap\"\n      }), \", \", _jsx(_components.strong, {\n        children: \"Get\"\n      }), \" data through \", _jsx(_components.strong, {\n        children: \"Key\"\n      }), \" is very efficient, because it is not like \", _jsx(_components.strong, {\n        children: \"LevelDB\"\n      }), \", binary searching \", _jsx(_components.strong, {\n        children: \"Key\"\n      }), \" in the middle process are not required, and the \", _jsx(_components.strong, {\n        children: \"Bitmap\"\n      }), \" can be resident in memory.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Based on the above storage structure, the entire query logic is as follows:\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Through \", _jsx(_components.strong, {\n          children: \"Index Block\"\n        }), \", we can directly know whether the queried \", _jsx(_components.strong, {\n          children: \"Key\"\n        }), \" exists. If it does not exist, return it directly. If it exists, get the first position (\", _jsx(_components.strong, {\n          children: \"Index\"\n        }), \") in the \", _jsx(_components.strong, {\n          children: \"Bitmap\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"First jump: According to the \", _jsx(_components.strong, {\n          children: \"Index\"\n        }), \" obtained above, in \", _jsx(_components.strong, {\n          children: \"Offset Block\"\n        }), \", after skipping \", _jsx(_components.strong, {\n          children: \"Index * Offset Length\"\n        }), \", we can get \", _jsx(_components.strong, {\n          children: \"Value Entry Offset(Position)\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"The second jump: According to the \", _jsx(_components.strong, {\n          children: \"Position\"\n        }), \" obtained above, skip the \", _jsx(_components.strong, {\n          children: \"Position\"\n        }), \" at the beginning of the file and then the desired \", _jsx(_components.strong, {\n          children: \"Value\"\n        }), \" can be read directly;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"If we want to do the \", _jsx(_components.strong, {\n        children: \"Scan\"\n      }), \" operation, just directly read the sequence based on the \", _jsx(_components.strong, {\n        children: \"Index Block\"\n      }), \" and \", _jsx(_components.strong, {\n        children: \"Offset Blcok\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.h6, {\n      children: \"Reference\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"http://roaringbitmap.org\",\n          children: _jsx(_components.em, {\n            children: \"RoaringBitMap\"\n          })\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"http://opentsdb.net/docs/build/html/user_guide/uids.html\",\n          children: _jsx(_components.em, {\n            children: \"OpenTSDB UID\"\n          })\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://rocksdb.org/\",\n          children: _jsx(_components.em, {\n            children: \"RocksDB\"\n          })\n        })\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = {\n    ..._provideComponents(),\n    ...props.components\n  };\n  return MDXLayout ? _jsx(MDXLayout, {\n    ...props,\n    children: _jsx(_createMdxContent, {\n      ...props\n    })\n  }) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}},"tocItems":[{"id":"time-series-characteristics","level":2,"title":"Time series characteristics"},{"id":"storage-structure","level":2,"title":"Storage structure"},{"id":"database","level":3,"title":"Database"},{"id":"shard","level":3,"title":"Shard"},{"id":"kv-store","level":2,"title":"KV store"},{"id":"compaction","level":3,"title":"Compaction"},{"id":"rollup","level":3,"title":"Rollup"},{"id":"sstable-layout","level":3,"title":"SSTable layout"}],"releases":null,"sidebar":[{"index":2,"title":"Getting Started","children":[{"index":1,"title":"Docker","children":[],"href":"/docs/lindb/getting-started/docker"},{"index":2,"title":"Package","children":[],"href":"/docs/lindb/getting-started/package"}]},{"index":3,"title":"Developer Guide","children":[{"index":1,"title":"Connect","children":[],"href":"/docs/lindb/developer-guide/connect"},{"index":2,"title":"Create a database","children":[],"href":"/docs/lindb/developer-guide/create-database"},{"index":3,"title":"Insert data","children":[],"href":"/docs/lindb/developer-guide/insert-data"},{"index":4,"title":"Query data","children":[],"href":"/docs/lindb/developer-guide/query-data"}]},{"index":4,"title":"Deployment","children":[{"index":1,"title":"Kubernetes","children":[],"href":"/docs/lindb/deployment/kubernetes"},{"index":2,"title":"Manual deployment","children":[],"href":"/docs/lindb/deployment/manual"}]},{"index":5,"title":"Client","children":[{"index":1,"title":"CLI","children":[],"href":"/docs/lindb/client/cli"},{"index":2,"title":"Client libraries","children":[],"href":"/docs/lindb/client/client-libraries"},{"index":3,"title":"Go","children":[],"href":"/docs/lindb/client/go"},{"index":4,"title":"Java","children":[],"href":"/docs/lindb/client/java"}]},{"index":6,"title":"Lin Ql","children":[{"index":1,"title":"Lin query language","children":[],"href":"/docs/lindb/lin-ql/sql"}]},{"index":7,"title":"Admin Console","children":[{"index":1,"title":"Introduction","children":[],"href":"/docs/lindb/admin-console/index"},{"index":2,"title":"Cluster overview","children":[],"href":"/docs/lindb/admin-console/overview"},{"index":3,"title":"Data search","children":[],"href":"/docs/lindb/admin-console/search"},{"index":4,"title":"Data explore","children":[],"href":"/docs/lindb/admin-console/explore"},{"index":5,"title":"Cluster monitoring","children":[],"href":"/docs/lindb/admin-console/monitoring"},{"index":6,"title":"Metadata","children":[],"href":"/docs/lindb/admin-console/metadata"}]},{"index":8,"title":"Api","children":[{"index":1,"title":"Introduction","children":[],"href":"/docs/lindb/api/index"},{"index":2,"title":"Insert","children":[],"href":"/docs/lindb/api/insert"},{"index":3,"title":"Query","children":[],"href":"/docs/lindb/api/query"},{"index":4,"title":"State","children":[],"href":"/docs/lindb/api/state"}]},{"index":9,"title":"Reference","children":[{"index":1,"title":"Data Model","children":[],"href":"/docs/lindb/reference/data-model"},{"index":2,"title":"Metric","children":[],"href":"/docs/lindb/reference/metric"},{"index":3,"title":"Configuration","children":[],"href":"/docs/lindb/reference/configuration"}]},{"index":10,"title":"Design","children":[{"index":1,"title":"Architecture","children":[],"href":"/docs/lindb/design/architecture"},{"index":2,"title":"Coordinator","children":[],"href":"/docs/lindb/design/coordinator"},{"index":3,"title":"Replication","children":[],"href":"/docs/lindb/design/replication"},{"index":4,"title":"Query","children":[],"href":"/docs/lindb/design/query"},{"index":5,"title":"Storage","children":[],"href":"/docs/lindb/design/storage"},{"index":6,"title":"Memory database","children":[],"href":"/docs/lindb/design/memory-database"},{"index":7,"title":"Inverted index","children":[],"href":"/docs/lindb/design/inverted-index"}]}],"locale":"","_nextI18Next":{"initialI18nStore":{"en":{"translation":{"Lin Ql":"Lin QL","Api":"API"}}},"initialLocale":"en","ns":["translation"],"userConfig":null}},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["lindb","design","storage"]},"buildId":"-NtRW_Tocke_77ve0GfWf","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>