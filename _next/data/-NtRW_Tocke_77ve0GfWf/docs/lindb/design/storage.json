{"pageProps":{"page":{"path":"/docs/lindb/10-design/05-storage.mdx","meta":{"title":"Storage"},"title":"Storage","parent":"Design","commitInfo":{"author":"stone1100","date":"Mon Jun 24 07:03:27 2024"}},"source":{"compiledSource":"\"use strict\";\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = {\n    a: \"a\",\n    code: \"code\",\n    div: \"div\",\n    em: \"em\",\n    h2: \"h2\",\n    h3: \"h3\",\n    h6: \"h6\",\n    img: \"img\",\n    li: \"li\",\n    ol: \"ol\",\n    p: \"p\",\n    path: \"path\",\n    pre: \"pre\",\n    span: \"span\",\n    strong: \"strong\",\n    svg: \"svg\",\n    ul: \"ul\",\n    ..._provideComponents(),\n    ...props.components\n  };\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"All data of \", _jsx(_components.strong, {\n        children: \"LinDB\"\n      }), \" will be stored on the local disk, and there are different storage structures according to different data types:\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Metirc Metadata\"\n        }), \": store \", _jsx(_components.strong, {\n          children: \"Metric Name\"\n        }), \" and its underlying \", _jsx(_components.strong, {\n          children: \"Fields\"\n        }), \"/\", _jsx(_components.strong, {\n          children: \"Tag Keys\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Tags(Series) Index\"\n        }), \": store all \", _jsx(_components.strong, {\n          children: \"Tags\"\n        }), \" under a \", _jsx(_components.strong, {\n          children: \"Metric\"\n        }), \", this part is divided into \", _jsx(_components.strong, {\n          children: \"2\"\n        }), \" data types;\", \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsxs(_components.li, {\n            children: [\"Forward: \", _jsx(_components.strong, {\n              children: \"Tags\"\n            }), \" corresponding to \", _jsx(_components.strong, {\n              children: \"Series ID\"\n            }), \";\"]\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [\"Inverted: The inverted index of \", _jsx(_components.strong, {\n              children: \"Tag Key/Value\"\n            }), \", where  \", _jsx(_components.strong, {\n              children: \"Series ID\"\n            }), \" are binding to \", _jsx(_components.strong, {\n              children: \"Tag Value\"\n            }), \". \", _jsx(_components.strong, {\n              children: \"Series ID\"\n            }), \" set is compressed stored by \", _jsx(_components.a, {\n              href: \"http://roaringbitmap.org\",\n              children: \"RoaringBitMap\"\n            }), \" ;\"]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Data\"\n        }), \": Storage of \", _jsx(_components.strong, {\n          children: \"Data Point\"\n        }), \" under all \", _jsx(_components.strong, {\n          children: \"Time Series\"\n        }), \";\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"All the above data types are stored in a common underlying \", _jsx(_components.strong, {\n        children: \"KV Store\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Time series characteristics\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Before talking about storage, let's talk about the characteristics of time-series, as shown in the figure:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/img/lindb/design/time_series_characteristic.png\",\n        alt: \"Time series characteristics\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Time series data characteristics (according to its time characteristics, it can be divided into time-invariant and time-variant data)\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Time Series\"\n        }), \" => \", _jsx(_components.strong, {\n          children: \"Metric + Tags\"\n        }), \": This part of the data is basically a string, and this data occupies the bulk of the data packet, but it will not vary with time flows.\\nConverting these strings into numerical values for storage to reduce storage costs;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Fields\"\n        }), \": This part of the data is basically numeric and changes with time, but the numeric type is easy to compress;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Storage structure\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Database\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/img/lindb/design/storage_database.png\",\n        alt: \"storage database\"\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"The data of a database are distributed on different nodes of the \", _jsx(_components.strong, {\n          children: \"Storage\"\n        }), \" cluster according to \", _jsx(_components.strong, {\n          children: \"Shard\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"A \", _jsx(_components.strong, {\n          children: \"Shard\"\n        }), \" can have multiple replicas, please see \", _jsx(_components.a, {\n          href: \"/docs/lindb/design/replication\",\n          children: \"Replication\"\n        }), \" for details;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Shard\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"shiki shiki-themes material-theme-lighter catppuccin-macchiato language-sh\",\n      style: {\n        backgroundColor: \"#FAFAFA\",\n        \"--shiki-dark-bg\": \"#1e293b\",\n        color: \"#90A4AE\",\n        \"--shiki-dark\": \"#cad3f5\"\n      },\n      tabIndex: \"0\",\n      children: _jsxs(_components.code, {\n        className: \"language-sh\",\n        children: [_jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" db_test_1\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" meta\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" namespace\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" metric\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" field\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" tagkey\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" tagvalue\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" shard\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \"     ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 1\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" inverted\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" forward\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" segment\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"     ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" day\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 20190101\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 01\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 02\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 23\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 20190102\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"     ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" month\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 201901\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 01\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 02\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"  |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 31\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 201902\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"     └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" year\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"        ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 2019\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"        |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 01\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"        |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 02\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"        |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 12\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"     |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"        └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 2020\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"|\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \"     └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#F76D47\",\n              \"--shiki-dark\": \"#F5A97F\"\n            },\n            children: \" 2\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"└─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" db_test_2\"\n          })]\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"line\"\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The storage directory above describes how data are stored on a \", _jsx(_components.strong, {\n        children: \"Storage\"\n      }), \" node.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Taking the data structure of a single database on a single node as an example:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"meta\"\n        }), \": store all \", _jsx(_components.strong, {\n          children: \"metadata\"\n        }), \", at database level:\", \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsx(_components.li, {\n            children: _jsx(_components.strong, {\n              children: \"namespace\"\n            })\n          }), \"\\n\", _jsx(_components.li, {\n            children: _jsx(_components.strong, {\n              children: \"metric\"\n            })\n          }), \"\\n\", _jsx(_components.li, {\n            children: _jsx(_components.strong, {\n              children: \"field\"\n            })\n          }), \"\\n\", _jsx(_components.li, {\n            children: _jsx(_components.strong, {\n              children: \"tag key\"\n            })\n          }), \"\\n\", _jsx(_components.li, {\n            children: _jsx(_components.strong, {\n              children: \"tag value\"\n            })\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"shard\"\n        }), \": A database will have multiple \", _jsx(_components.strong, {\n          children: \"shard\"\n        }), \"s on a single node, and each \", _jsx(_components.strong, {\n          children: \"shard\"\n        }), \" has the following data:\", \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"index\"\n            }), \": store forward and reverse indexes;\"]\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"segment\"\n            }), \": store the data of each time slice;\"]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"See \", _jsx(_components.a, {\n        href: \"/docs/lindb/design/inverted-index\",\n        children: \"Invertd Index\"\n      }), \" for the structure of \", _jsx(_components.strong, {\n        children: \"meta\"\n      }), \" and \", _jsx(_components.strong, {\n        children: \"index\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"All data are divided into different parts by the \", _jsx(_components.strong, {\n        children: \"Interval\"\n      }), \" of the database to store specific data in time slices:\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"The time series has strong time correlation, which makes it easier for querying;\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Convenient for handling \", _jsx(_components.strong, {\n          children: \"TTL\"\n        }), \". If the data expires, just delete the corresponding directory directly;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"There are multiple \", _jsx(_components.strong, {\n          children: \"segments\"\n        }), \" under each \", _jsx(_components.strong, {\n          children: \"shard\"\n        }), \", and each \", _jsx(_components.strong, {\n          children: \"segment\"\n        }), \" stores the data of the corresponding time slice according to the corresponding \", _jsx(_components.strong, {\n          children: \"interval\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Why are there many \", _jsx(_components.strong, {\n          children: \"data families\"\n        }), \" stored according to \", _jsx(_components.strong, {\n          children: \"interval\"\n        }), \" under each \", _jsx(_components.strong, {\n          children: \"segment\"\n        }), \"? This is mainly because the main problem solved by \", _jsx(_components.strong, {\n          children: \"LinDB\"\n        }), \" is to store a large amount of monitoring data. The general monitoring data is basically written at the latest time, and basically no historical data will be written. The data storage of the entire \", _jsx(_components.strong, {\n          children: \"LinDB\"\n        }), \" is similar to the \", _jsx(_components.strong, {\n          children: \"LSM\"\n        }), \" method, in order to reduce the merge operation between data files which leads to write amplification. then the re-sharding policy of \", _jsx(_components.strong, {\n          children: \"segment\"\n        }), \" time slice is adopted.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The following is an example of \", _jsx(_components.strong, {\n        children: \"interval\"\n      }), \" being \", _jsx(_components.strong, {\n        children: \"10s\"\n      }), \":\"]\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"segment\"\n        }), \" is stored by day;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Each \", _jsx(_components.strong, {\n          children: \"segment\"\n        }), \" is divided into \", _jsx(_components.strong, {\n          children: \"data family\"\n        }), \" by hour, one \", _jsx(_components.strong, {\n          children: \"family\"\n        }), \" per hour, and the files in each \", _jsx(_components.strong, {\n          children: \"family\"\n        }), \" store specific data in columns;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"KV store\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"shiki shiki-themes material-theme-lighter catppuccin-macchiato language-sh\",\n      style: {\n        backgroundColor: \"#FAFAFA\",\n        \"--shiki-dark-bg\": \"#1e293b\",\n        color: \"#90A4AE\",\n        \"--shiki-dark\": \"#cad3f5\"\n      },\n      tabIndex: \"0\",\n      children: _jsxs(_components.code, {\n        className: \"language-sh\",\n        children: [_jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"└─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" kv_store_1\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"   ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" CURRENT\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"   ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" LOCK\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"   ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" MANIFEST-000010\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"   ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" OPTIONS\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"   ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" family_1\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"   |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 000001.sst\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"   |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 000002.sst\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"   |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 000004.sst\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"   |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 000008.sst\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"   ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" family_2\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"   |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 000011.sst\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"   |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 000012.sst\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"   |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  ├─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 000014.sst\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \"   |\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"  └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 000018.sst\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E2931D\",\n              \"--shiki-dark\": \"#8AADF4\",\n              fontStyle: \"inherit\",\n              \"--shiki-dark-font-style\": \"italic\"\n            },\n            children: \"   └─\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" family_3\"\n          })]\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"line\"\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The whole \", _jsx(_components.strong, {\n        children: \"KV Store\"\n      }), \" is similar to \", _jsx(_components.strong, {\n        children: \"LSM\"\n      }), \", but it is different from \", _jsx(_components.strong, {\n        children: \"LSM\"\n      }), \". The main differences are as follows:\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"There is no \", _jsx(_components.strong, {\n          children: \"Memory Table\"\n        }), \", because the whole system has a \", _jsx(_components.strong, {\n          children: \"Memory Database\"\n        }), \" to store all recently data, and these data will be directly written to the \", _jsx(_components.strong, {\n          children: \"KV Store\"\n        }), \" later;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Key\"\n        }), \"'s type is \", _jsx(_components.strong, {\n          children: \"uint32\"\n        }), \", because all \", _jsx(_components.strong, {\n          children: \"string\"\n        }), \" will be converted to \", _jsx(_components.strong, {\n          children: \"uint32\"\n        }), \" according to the timing characteristics, so the underlying \", _jsx(_components.strong, {\n          children: \"KV Store\"\n        }), \" is directly designed as an \", _jsx(_components.strong, {\n          children: \"uint32 => binary\"\n        }), \" structure;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The directory structure is very similar to \", _jsx(_components.strong, {\n        children: \"rocksdb\"\n      }), \" and supports \", _jsx(_components.strong, {\n        children: \"column family\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"CURRENT\"\n        }), \": record the currently valid \", _jsx(_components.strong, {\n          children: \"MANIFEST\"\n        }), \" file;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"LOCK\"\n        }), \": file lock to prevent multiple processes from opening the same \", _jsx(_components.strong, {\n          children: \"KV Store\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"MANIFEST\"\n        }), \": \", _jsx(_components.strong, {\n          children: \"change log\"\n        }), \" of all \", _jsx(_components.strong, {\n          children: \"sstable\"\n        }), \" changes, including some \", _jsx(_components.strong, {\n          children: \"change log\"\n        }), \" of \", _jsx(_components.strong, {\n          children: \"sequence\"\n        }), \", etc.;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"OPTIONS\"\n        }), \": \", _jsx(_components.strong, {\n          children: \"KV Store\"\n        }), \" configuration information, including configuration information at each \", _jsx(_components.strong, {\n          children: \"column family\"\n        }), \" level;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"KV Store\"\n        }), \" can store multiple \", _jsx(_components.strong, {\n          children: \"column families\"\n        }), \", and each \", _jsx(_components.strong, {\n          children: \"family\"\n        }), \" stores multiple \", _jsx(_components.strong, {\n          children: \"sstable\"\n        }), \" files;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Compaction\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/img/lindb/design/storage_compaction.png\",\n        alt: \"Compaction\"\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Each \", _jsx(_components.strong, {\n          children: \"KV Store\"\n        }), \" will start a \", _jsx(_components.strong, {\n          children: \"Goroutine\"\n        }), \" periodically to \", _jsx(_components.strong, {\n          children: \"Check\"\n        }), \" whether there are too many files in each \", _jsx(_components.strong, {\n          children: \"Family Level 0\"\n        }), \" and meet the conditions of \", _jsx(_components.strong, {\n          children: \"Compaction\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"When the conditions are met, the corresponding \", _jsx(_components.strong, {\n          children: \"Family\"\n        }), \" will be notified to execute \", _jsx(_components.strong, {\n          children: \"Compaction Job\"\n        }), \", if another \", _jsx(_components.strong, {\n          children: \"Compaction\"\n        }), \" job is being executed, this operation will be ignored, all operations will only be done in one \", _jsx(_components.strong, {\n          children: \"Goroutine\"\n        }), \",of which the benefit is lock-free , because \", _jsx(_components.strong, {\n          children: \"Compaction Job\"\n        }), \" is a very heavy operation, and if locking is required, it may affect the writing of new files\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Compaction\"\n      }), \" mainly merges the files in \", _jsx(_components.strong, {\n        children: \"Level 0\"\n      }), \" into \", _jsx(_components.strong, {\n        children: \"Level 1\"\n      }), \". Currently, \", _jsx(_components.strong, {\n        children: \"LinDB\"\n      }), \" has only 2 Level, which is different from \", _jsx(_components.strong, {\n        children: \"LevelDB\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Compaction\"\n      }), \" condition: any one of the following conditions will trigger the Compact task:\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"the number of files in \", _jsx(_components.strong, {\n          children: \"Level 0\"\n        }), \" exceeds the number of files configured;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"There are 2 merge process:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Directly moving the files of \", _jsx(_components.strong, {\n          children: \"Level 0\"\n        }), \" to \", _jsx(_components.strong, {\n          children: \"Level 1\"\n        }), \", but the conditions of \", _jsx(_components.strong, {\n          children: \"compact\"\n        }), \" should be met: the number of files of \", _jsx(_components.strong, {\n          children: \"pick files from level 0\"\n        }), \" is \", _jsx(_components.strong, {\n          children: \"1\"\n        }), \", the number of files of \", _jsx(_components.strong, {\n          children: \"pick fiels from level 1\"\n        }), \" is \", _jsx(_components.strong, {\n          children: \"1\"\n        }), \" The number of files is \", _jsx(_components.strong, {\n          children: \"0\"\n        }), \", that is, only one file needs to be merged, just modify \", _jsx(_components.strong, {\n          children: \"Metadata\"\n        }), \";\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Need to combine multiple files into one large file;\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.strong, {\n        children: \"Compact\"\n      }), \" process is as follows:\"]\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Select the file that needs \", _jsx(_components.strong, {\n          children: \"Compact\"\n        }), \", firstly select the current \", _jsx(_components.strong, {\n          children: \"level 0\"\n        }), \" file, then traverse each \", _jsx(_components.strong, {\n          children: \"level 0\"\n        }), \" file, press \", _jsx(_components.strong, {\n          children: \"key range\"\n        }), \" to get the overlapping file from \", _jsx(_components.strong, {\n          children: \"level 1\"\n        }), \", why is here? Fetch \", _jsx(_components.strong, {\n          children: \"level 1\"\n        }), \" files by each \", _jsx(_components.strong, {\n          children: \"level 0\"\n        }), \" file, not by the final \", _jsx(_components.strong, {\n          children: \"key range\"\n        }), \" in \", _jsx(_components.strong, {\n          children: \"level 0\"\n        }), \". Because the \", _jsx(_components.strong, {\n          children: \"keys\"\n        }), \" of the entire \", _jsx(_components.strong, {\n          children: \"level 0\"\n        }), \" file may be relatively hashed, so if we take the final \", _jsx(_components.strong, {\n          children: \"range\"\n        }), \", we may get a large range. E.g:\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"shiki shiki-themes material-theme-lighter catppuccin-macchiato language-yaml\",\n      style: {\n        backgroundColor: \"#FAFAFA\",\n        \"--shiki-dark-bg\": \"#1e293b\",\n        color: \"#90A4AE\",\n        \"--shiki-dark\": \"#cad3f5\"\n      },\n      tabIndex: \"0\",\n      children: _jsxs(_components.code, {\n        className: \"language-yaml\",\n        children: [_jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E53935\",\n              \"--shiki-dark\": \"#8AADF4\"\n            },\n            children: \"for example\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \":\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E53935\",\n              \"--shiki-dark\": \"#8AADF4\"\n            },\n            children: \"Level 0\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \":\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E53935\",\n              \"--shiki-dark\": \"#8AADF4\"\n            },\n            children: \"    file 1\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \":\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 1~10\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E53935\",\n              \"--shiki-dark\": \"#8AADF4\"\n            },\n            children: \"    file 2\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \":\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 1000~1001\"\n          })]\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"line\",\n          children: _jsx(_components.span, {\n            style: {\n              color: \"#90A4AE\",\n              \"--shiki-dark\": \"#CAD3F5\"\n            },\n            children: \"    \"\n          })\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E53935\",\n              \"--shiki-dark\": \"#8AADF4\"\n            },\n            children: \"Level 1\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \":\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E53935\",\n              \"--shiki-dark\": \"#8AADF4\"\n            },\n            children: \"    file 3\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \":\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 1~5\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E53935\",\n              \"--shiki-dark\": \"#8AADF4\"\n            },\n            children: \"    file 4\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \":\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 100~200\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#E53935\",\n              \"--shiki-dark\": \"#8AADF4\"\n            },\n            children: \"    file 5\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#8BD5CA\"\n            },\n            children: \":\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" 400~500\"\n          })]\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"line\",\n          children: _jsx(_components.span, {\n            style: {\n              color: \"#90A4AE\",\n              \"--shiki-dark\": \"#CAD3F5\"\n            },\n            children: \"    \"\n          })\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#939AB7\"\n            },\n            children: \"-\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" If we press the final range of level 0, 1~1001, this will take out all the files of level 1\"\n          })]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"line\",\n          children: [_jsx(_components.span, {\n            style: {\n              color: \"#39ADB5\",\n              \"--shiki-dark\": \"#939AB7\"\n            },\n            children: \"-\"\n          }), _jsx(_components.span, {\n            style: {\n              color: \"#91B859\",\n              \"--shiki-dark\": \"#A6DA95\"\n            },\n            children: \" If we take it according to the range of each level 0, we only need to take the file 3 (1~5) in the end.\"\n          })]\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"line\"\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.ol, {\n      start: \"2\",\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"The entire \", _jsx(_components.strong, {\n          children: \"compact\"\n        }), \" process is actually a multi-way merge process. Since the \", _jsx(_components.strong, {\n          children: \"key\"\n        }), \" is sorted when \", _jsx(_components.strong, {\n          children: \"flush\"\n        }), \" writes files, \", _jsx(_components.strong, {\n          children: \"compact\"\n        }), \" only needs to read each file in order, and press ** The order of key** can traverse the data from these files;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"During the process, the data with the same \", _jsx(_components.strong, {\n          children: \"key\"\n        }), \" needs to be merged. The merging process needs to be merged according to different data types, and the \", _jsx(_components.strong, {\n          children: \"Merger Interface\"\n        }), \" needs to be implemented;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"If \", _jsx(_components.strong, {\n          children: \"key\"\n        }), \" does not need the merge operation, write the corresponding data directly to the file, which can reduce unnecessary serialization operations;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.ol, {\n      start: \"3\",\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Once \", _jsx(_components.strong, {\n          children: \"compact\"\n        }), \" merging and writing files is successfully completed, submitting \", _jsx(_components.strong, {\n          children: \"Version Edit\"\n        }), \" to \", _jsx(_components.strong, {\n          children: \"Version Set\"\n        }), \" will be taken. At this time, \", _jsx(_components.strong, {\n          children: \"Version Edit\"\n        }), \" includes newly written files and old files that need to be deleted. This process requires locks;\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Delete those useless files: such as files that have been merged, or some intermediate result files after failure. It should be noted here that the cleanup operation must be done after the \", _jsx(_components.strong, {\n          children: \"Version Edit\"\n        }), \" is successfully submitted to the \", _jsx(_components.strong, {\n          children: \"Version Set\"\n        }), \", otherwise which may leads to data file confusion;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.div, {\n      className: \"markdown-alert markdown-alert-tip\",\n      dir: \"auto\",\n      children: [\"\\n\", _jsxs(_components.p, {\n        className: \"markdown-alert-title\",\n        dir: \"auto\",\n        children: [_jsx(_components.svg, {\n          className: \"octicon\",\n          viewBox: \"0 0 16 16\",\n          width: \"16\",\n          height: \"16\",\n          \"aria-hidden\": \"true\",\n          children: _jsx(_components.path, {\n            d: \"M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z\"\n          })\n        }), \"TIP\"]\n      }), \"\\n\", _jsx(_components.p, {}), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"Version Edit: Similar to LevelDB, a Version Edit will be recorded for each file write operation, and Version Edit will record new files/deleted files, so that when the system restarts or crashes, just reload the Version Edit Log again. There are those that mention the whole useful document;\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"Version Set: record which files are currently stored and available;\"\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Rollup\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/img/lindb/design/storage_rollup.png\",\n        alt: \"Rollup\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Rollup Job\"\n      }), \" is a special \", _jsx(_components.strong, {\n        children: \"Compact Job\"\n      }), \", which mainly deals with data reduction (\", _jsx(_components.strong, {\n        children: \"DownSampling\"\n      }), \"), namely \", _jsx(_components.strong, {\n        children: \"10s->5m->1h\"\n      }), \", its core logic is same as \", _jsx(_components.strong, {\n        children: \"Compaction Job\"\n      }), \", the main differences are as follows :\"]\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Source Family\"\n        }), \" merges data into \", _jsx(_components.strong, {\n          children: \"Target Family\"\n        }), \" to operate \", _jsx(_components.strong, {\n          children: \"2\"\n        }), \" \", _jsx(_components.strong, {\n          children: \"Family\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"After the merging is completed, delete the files that need \", _jsx(_components.strong, {\n          children: \"Rollup\"\n        }), \" in \", _jsx(_components.strong, {\n          children: \"Source Family Version\"\n        }), \", and record the files that have been \", _jsx(_components.strong, {\n          children: \"Rollup\"\n        }), \" in \", _jsx(_components.strong, {\n          children: \"Target Family Version\"\n        }), \" to prevent duplicate data merging;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"SSTable layout\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/img/lindb/design/storage_sstable.png\",\n        alt: \"SSTable\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The structure of each \", _jsx(_components.strong, {\n        children: \"SSTable\"\n      }), \" is shown in the figure above, and it mainly has the following components:\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Footer Block\"\n        }), \": Storing \", _jsx(_components.strong, {\n          children: \"Magic Number(8 Bytes) + Version(1 byte) + Index Block Offset(4 bytes) + Offset Block Offset(4 bytes)\"\n        }), \", which can be accessed through both \", _jsx(_components.strong, {\n          children: \"Index Block Offset\"\n        }), \" and \", _jsx(_components.strong, {\n          children: \"Offset Block\"\n        }), \" to read contents of \", _jsx(_components.strong, {\n          children: \"Index Block\"\n        }), \" and \", _jsx(_components.strong, {\n          children: \"Offset Block\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Index Block\"\n        }), \": Using \", _jsx(_components.strong, {\n          children: \"Roaring Bitmap\"\n        }), \" to store all the \", _jsx(_components.strong, {\n          children: \"Keys\"\n        }), \" in the current \", _jsx(_components.strong, {\n          children: \"SSTable\"\n        }), \" file, as all \", _jsx(_components.strong, {\n          children: \"Key\"\n        }), \" are \", _jsx(_components.strong, {\n          children: \"uint32\"\n        }), \", so we can directly use \", _jsx(_components.strong, {\n          children: \"Roaring Bitmap\"\n        }), \" to store, such benefits is that we can use \", _jsx(_components.strong, {\n          children: \"Roaring Bitmap\"\n        }), \" to determine whether a \", _jsx(_components.strong, {\n          children: \"Key\"\n        }), \" exists, and at the same time we can also know the position of this \", _jsx(_components.strong, {\n          children: \"Key\"\n        }), \" in this \", _jsx(_components.strong, {\n          children: \"Roaring Bitmap\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Offset Block\"\n        }), \": store all the \", _jsx(_components.strong, {\n          children: \"Offset\"\n        }), \" of \", _jsx(_components.strong, {\n          children: \"Value Entry\"\n        }), \", and each \", _jsx(_components.strong, {\n          children: \"Offset\"\n        }), \" is stored with a fixed length, so if it is found in the \", _jsx(_components.strong, {\n          children: \"Nth\"\n        }), \" position in the \", _jsx(_components.strong, {\n          children: \"Index Block\"\n        }), \", The \", _jsx(_components.strong, {\n          children: \"Offset\"\n        }), \" of that \", _jsx(_components.strong, {\n          children: \"Value Entry\"\n        }), \" is the data pointed to by \", _jsx(_components.strong, {\n          children: \"N * Offset Length\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Value Entry\"\n        }), \": store the \", _jsx(_components.strong, {\n          children: \"Value\"\n        }), \" corresponding to each \", _jsx(_components.strong, {\n          children: \"Key/Value\"\n        }), \", because the \", _jsx(_components.strong, {\n          children: \"Key\"\n        }), \" is already stored in the \", _jsx(_components.strong, {\n          children: \"Index Block\"\n        }), \", so the \", _jsx(_components.strong, {\n          children: \"Value Entry\"\n        }), \" only needs to store the \", _jsx(_components.strong, {\n          children: \"Value\"\n        }), \" in the \", _jsx(_components.strong, {\n          children: \"Key/Value\"\n        }), \";\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The advantage of this is that the compression of \", _jsx(_components.strong, {\n        children: \"Key\"\n      }), \" can be done well, and \", _jsx(_components.strong, {\n        children: \"Roaring Bitmap\"\n      }), \" has done a lot of optimization on \", _jsx(_components.strong, {\n        children: \"Bitmap\"\n      }), \", \", _jsx(_components.strong, {\n        children: \"Get\"\n      }), \" data through \", _jsx(_components.strong, {\n        children: \"Key\"\n      }), \" is very efficient, because it is not like \", _jsx(_components.strong, {\n        children: \"LevelDB\"\n      }), \", binary searching \", _jsx(_components.strong, {\n        children: \"Key\"\n      }), \" in the middle process are not required, and the \", _jsx(_components.strong, {\n        children: \"Bitmap\"\n      }), \" can be resident in memory.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Based on the above storage structure, the entire query logic is as follows:\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Through \", _jsx(_components.strong, {\n          children: \"Index Block\"\n        }), \", we can directly know whether the queried \", _jsx(_components.strong, {\n          children: \"Key\"\n        }), \" exists. If it does not exist, return it directly. If it exists, get the first position (\", _jsx(_components.strong, {\n          children: \"Index\"\n        }), \") in the \", _jsx(_components.strong, {\n          children: \"Bitmap\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"First jump: According to the \", _jsx(_components.strong, {\n          children: \"Index\"\n        }), \" obtained above, in \", _jsx(_components.strong, {\n          children: \"Offset Block\"\n        }), \", after skipping \", _jsx(_components.strong, {\n          children: \"Index * Offset Length\"\n        }), \", we can get \", _jsx(_components.strong, {\n          children: \"Value Entry Offset(Position)\"\n        }), \";\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"The second jump: According to the \", _jsx(_components.strong, {\n          children: \"Position\"\n        }), \" obtained above, skip the \", _jsx(_components.strong, {\n          children: \"Position\"\n        }), \" at the beginning of the file and then the desired \", _jsx(_components.strong, {\n          children: \"Value\"\n        }), \" can be read directly;\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"If we want to do the \", _jsx(_components.strong, {\n        children: \"Scan\"\n      }), \" operation, just directly read the sequence based on the \", _jsx(_components.strong, {\n        children: \"Index Block\"\n      }), \" and \", _jsx(_components.strong, {\n        children: \"Offset Blcok\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.h6, {\n      children: \"Reference\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"http://roaringbitmap.org\",\n          children: _jsx(_components.em, {\n            children: \"RoaringBitMap\"\n          })\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"http://opentsdb.net/docs/build/html/user_guide/uids.html\",\n          children: _jsx(_components.em, {\n            children: \"OpenTSDB UID\"\n          })\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://rocksdb.org/\",\n          children: _jsx(_components.em, {\n            children: \"RocksDB\"\n          })\n        })\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = {\n    ..._provideComponents(),\n    ...props.components\n  };\n  return MDXLayout ? _jsx(MDXLayout, {\n    ...props,\n    children: _jsx(_createMdxContent, {\n      ...props\n    })\n  }) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}},"tocItems":[{"id":"time-series-characteristics","level":2,"title":"Time series characteristics"},{"id":"storage-structure","level":2,"title":"Storage structure"},{"id":"database","level":3,"title":"Database"},{"id":"shard","level":3,"title":"Shard"},{"id":"kv-store","level":2,"title":"KV store"},{"id":"compaction","level":3,"title":"Compaction"},{"id":"rollup","level":3,"title":"Rollup"},{"id":"sstable-layout","level":3,"title":"SSTable layout"}],"releases":null,"sidebar":[{"index":2,"title":"Getting Started","children":[{"index":1,"title":"Docker","children":[],"href":"/docs/lindb/getting-started/docker"},{"index":2,"title":"Package","children":[],"href":"/docs/lindb/getting-started/package"}]},{"index":3,"title":"Developer Guide","children":[{"index":1,"title":"Connect","children":[],"href":"/docs/lindb/developer-guide/connect"},{"index":2,"title":"Create a database","children":[],"href":"/docs/lindb/developer-guide/create-database"},{"index":3,"title":"Insert data","children":[],"href":"/docs/lindb/developer-guide/insert-data"},{"index":4,"title":"Query data","children":[],"href":"/docs/lindb/developer-guide/query-data"}]},{"index":4,"title":"Deployment","children":[{"index":1,"title":"Kubernetes","children":[],"href":"/docs/lindb/deployment/kubernetes"},{"index":2,"title":"Manual deployment","children":[],"href":"/docs/lindb/deployment/manual"}]},{"index":5,"title":"Client","children":[{"index":1,"title":"CLI","children":[],"href":"/docs/lindb/client/cli"},{"index":2,"title":"Client libraries","children":[],"href":"/docs/lindb/client/client-libraries"},{"index":3,"title":"Go","children":[],"href":"/docs/lindb/client/go"},{"index":4,"title":"Java","children":[],"href":"/docs/lindb/client/java"}]},{"index":6,"title":"Lin Ql","children":[{"index":1,"title":"Lin query language","children":[],"href":"/docs/lindb/lin-ql/sql"}]},{"index":7,"title":"Admin Console","children":[{"index":1,"title":"Introduction","children":[],"href":"/docs/lindb/admin-console/index"},{"index":2,"title":"Cluster overview","children":[],"href":"/docs/lindb/admin-console/overview"},{"index":3,"title":"Data search","children":[],"href":"/docs/lindb/admin-console/search"},{"index":4,"title":"Data explore","children":[],"href":"/docs/lindb/admin-console/explore"},{"index":5,"title":"Cluster monitoring","children":[],"href":"/docs/lindb/admin-console/monitoring"},{"index":6,"title":"Metadata","children":[],"href":"/docs/lindb/admin-console/metadata"}]},{"index":8,"title":"Api","children":[{"index":1,"title":"Introduction","children":[],"href":"/docs/lindb/api/index"},{"index":2,"title":"Insert","children":[],"href":"/docs/lindb/api/insert"},{"index":3,"title":"Query","children":[],"href":"/docs/lindb/api/query"},{"index":4,"title":"State","children":[],"href":"/docs/lindb/api/state"}]},{"index":9,"title":"Reference","children":[{"index":1,"title":"Data Model","children":[],"href":"/docs/lindb/reference/data-model"},{"index":2,"title":"Metric","children":[],"href":"/docs/lindb/reference/metric"},{"index":3,"title":"Configuration","children":[],"href":"/docs/lindb/reference/configuration"}]},{"index":10,"title":"Design","children":[{"index":1,"title":"Architecture","children":[],"href":"/docs/lindb/design/architecture"},{"index":2,"title":"Coordinator","children":[],"href":"/docs/lindb/design/coordinator"},{"index":3,"title":"Replication","children":[],"href":"/docs/lindb/design/replication"},{"index":4,"title":"Query","children":[],"href":"/docs/lindb/design/query"},{"index":5,"title":"Storage","children":[],"href":"/docs/lindb/design/storage"},{"index":6,"title":"Memory database","children":[],"href":"/docs/lindb/design/memory-database"},{"index":7,"title":"Inverted index","children":[],"href":"/docs/lindb/design/inverted-index"}]}],"locale":"","_nextI18Next":{"initialI18nStore":{"en":{"translation":{"Lin Ql":"Lin QL","Api":"API"}}},"initialLocale":"en","ns":["translation"],"userConfig":null}},"__N_SSG":true}